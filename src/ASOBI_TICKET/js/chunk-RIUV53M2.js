import{a as N,b as be,c as Se}from"./chunk-6BQ47HOA.js";import{a as ve}from"./chunk-Q3ZDF7N3.js";import{a as _e,b as Ce}from"./chunk-GQ2Y3PYG.js";import{b as ce,c as le,e as de,g as me,i as pe,m as he,n as fe,q as ye,s as ke,t as Ee,u as Fe,v as z,w as De,x as O,y as j}from"./chunk-I3RHSA6D.js";import{h as Me}from"./chunk-KLXVAUUB.js";import{q as ne,r as R,s as oe,t as se,x as ge,y as U,z as K}from"./chunk-KZ3A2NRO.js";import{a as I}from"./chunk-DBRRJBUZ.js";import{i as T,l as xe}from"./chunk-264EOGRT.js";import{$a as s,Aa as l,Cc as ie,Eb as k,Hb as E,Hc as re,Ib as F,Pb as te,Qa as g,Qc as ue,Sa as _,Sc as H,Ua as X,W as $,Wa as S,X as G,Xc as V,Ya as P,Za as w,Zc as L,_ as m,_a as o,_c as ae,ab as v,ba as M,bb as J,ca as Y,cb as ee,da as W,eb as y,fc as D,gb as d,h as x,ib as c,ic as b,ka as p,la as h,t as A,ta as Q,tb as r,ub as C,vb as q,w as Z}from"./chunk-I424EGRW.js";var Ie=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Y({type:e}),e.\u0275inj=G({imports:[ne]});let i=e;return i})();var Te=(()=>{let e=class e{constructor(){this.pressEnter=new Q,this.isComposition=!1}onKeyDown(t){this.isComposition||(t.preventDefault(),this.pressEnter.emit(t))}compositionStart(){this.isComposition=!0}compositionEnd(){this.isComposition=!1}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=W({type:e,selectors:[["","tplPressEnter",""]],hostBindings:function(n,a){n&1&&d("keydown.enter",function(He){return a.onKeyDown(He)})("compositionstart",function(){return a.compositionStart()})("compositionend",function(){return a.compositionEnd()})},outputs:{pressEnter:"pressEnter"},standalone:!0});let i=e;return i})();var St=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=M({type:e,selectors:[["tpl-companion-item"]],inputs:{companion:"companion"},standalone:!0,features:[k],decls:2,vars:1,consts:[[1,"companion-name"]],template:function(n,a){n&1&&(o(0,"div",0),r(1),s()),n&2&&(l(),C(a.companion.name))},dependencies:[b],styles:["[_nghost-%COMP%]{display:flex}.companion-name[_ngcontent-%COMP%]{flex:1;font-size:1.5rem;min-width:0}.companion-number[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.5rem;font-weight:500;margin-left:8px}"],changeDetection:0});let i=e;return i})();function Ne(i,e){if(i&1){let u=y();o(0,"div",3),r(1," \u30C1\u30B1\u30C3\u30C8\u7533\u8FBC\u6642\u306B\u540C\u884C\u8005\u4E00\u89A7\u304B\u3089\u540C\u884C\u8005\u3092\u9078\u629E\u3057\u3066\u8A2D\u5B9A\u3057\u307E\u3059\u3002 \u4E0B\u8A18\u3044\u305A\u308C\u304B\u306E\u65B9\u6CD5\u3067\u540C\u884C\u8005\u3092\u767B\u9332\u3057\u3066\u304F\u3060\u3055\u3044\u3002 \u540C\u884C\u8005\u69D8\u3082\u4F1A\u54E1\u767B\u9332\u3057\u3066\u3044\u305F\u3060\u304F\u5FC5\u8981\u304C\u3054\u3056\u3044\u307E\u3059\u3002 "),v(2,"br"),r(3," \u540C\u884C\u8005\u306B\u8FFD\u52A0\u3059\u308B\u3068\u3001\u4F1A\u54E1\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u6C0F\u540D\u304C\u304A\u4E92\u3044\u306E\u540C\u884C\u8005\u4E00\u89A7\u306B\u8868\u793A\u3055\u308C\u307E\u3059\u3002 "),s(),o(4,"div",4)(5,"div",5)(6,"div",6),r(7,"\u8FFD\u52A0\u3057\u305F\u3044\u30E6\u30FC\u30B6\u30FC\u306E\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9\u3092\u5165\u529B"),s()(),o(8,"div",7)(9,"tpl-form-field")(10,"tpl-form-note"),r(11," \u540C\u884C\u8005\u306E\u30DE\u30A4\u30DA\u30FC\u30B8 > \u540C\u884C\u8005\u8A2D\u5B9A > \u540C\u884C\u8005\u3092\u8FFD\u52A0\u3059\u308B \u306B\u8868\u793A\u3055\u308C\u308B\u300C\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9\u300D\u3092\u5165\u529B\u3057\u3066\u540C\u884C\u8005\u767B\u9332\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002 "),s(),o(12,"input",8),d("pressEnter",function(){p(u);let n=c(2);return h(n.acceptInvitation())}),s()(),o(13,"div",9)(14,"button",10),d("click",function(){p(u);let n=c(2);return h(n.acceptInvitation())}),r(15,"\u540C\u884C\u8005\u306B\u8FFD\u52A0"),s()()()(),o(16,"div",4)(17,"div",5)(18,"div",6),r(19,"URL\u3067\u62DB\u5F85"),s()(),o(20,"div",11)(21,"div",12),r(22,"\u203B\u30A2\u30AF\u30BB\u30B9\u3059\u308B\u3060\u3051\u3067\u540C\u884C\u8005\u3068\u3057\u3066\u8FFD\u52A0\u3067\u304D\u308B\u30EA\u30F3\u30AF\u3092\u751F\u6210\u3057\u307E\u3059"),s(),o(23,"div",12),r(24,"\u203B\u4E0B\u8A18\u306EURL\u3092\u540C\u884C\u8005\u306B\u304A\u77E5\u3089\u305B\u304F\u3060\u3055\u3044"),s()(),o(25,"button",13),d("click",function(){let n=p(u),a=c(2);return h(a.copyLink(n.invitation.invitationUrl))}),o(26,"div",14),r(27),s(),o(28,"div",15),r(29,"\u30BF\u30C3\u30D7\u3057\u3066\u30B3\u30D4\u30FC"),s()()(),o(30,"div",4)(31,"div",5)(32,"div",6),r(33,"\u3042\u306A\u305F\u306E\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9"),s(),o(34,"button",16),d("click",function(){p(u);let n=c(2);return h(n.regenerate())}),r(35," \u30B3\u30FC\u30C9\u3092\u518D\u751F\u6210 "),s()(),o(36,"div",11)(37,"div",12),r(38,"\u203B\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9\u3092\u540C\u884C\u8005\u306B\u304A\u77E5\u3089\u305B\u3057\u3066\u3001\u767B\u9332\u3092\u3054\u4F9D\u983C\u304F\u3060\u3055\u3044"),s(),o(39,"div",12),r(40," \u203B\u540C\u884C\u8005\u306E\u30DE\u30A4\u30DA\u30FC\u30B8 > \u540C\u884C\u8005\u8A2D\u5B9A > \u540C\u884C\u8005\u3092\u8FFD\u52A0\u3059\u308B \u306B\u8868\u793A\u3055\u308C\u308B\u3010\u8FFD\u52A0\u3057\u305F\u3044\u30E6\u30FC\u30B6\u30FC\u306E\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3011\u306B\u4E0B\u8A18\u306E\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044 "),s()(),o(41,"button",13),d("click",function(){let n=p(u),a=c(2);return h(a.copyLink(n.invitation.invitationCode))}),o(42,"div",14),r(43),s(),o(44,"div",15),r(45,"\u30BF\u30C3\u30D7\u3057\u3066\u30B3\u30D4\u30FC"),s()()()}if(i&2){let u=e,t=c(2);l(12),_("formControl",t.codeForm),l(15),C(u.invitation.invitationUrl),l(16),C(u.invitation.invitationCode)}}function Ue(i,e){if(i&1&&(J(0),g(1,Ne,46,3),E(2,"async"),ee()),i&2){let u,t=c();l(),S((u=F(2,1,t.state$))?1:-1,u)}}var Be=(()=>{let e=class e{constructor(){this.codeForm=new me("",{nonNullable:!0,validators:[le.required]}),this.store=m(T),this.dialogRef=m(R),this.companionService=m(O),this.companionUsecase=m(j),this.state$=L({invitation:this.store.select(De).pipe(ae())}),this.fetchInvitationCode$=this.companionService.fetchInvitationCode()}dismiss(){this.dialogRef.close()}regenerate(){return x(this,null,function*(){yield this.companionUsecase.regenerateInvitationCode()})}copyLink(t){this.companionUsecase.copyToClipboard(t)}acceptInvitation(){return x(this,null,function*(){if(this.codeForm.invalid)return;let t=this.codeForm.value;t&&(yield this.companionUsecase.handleInvitation(t))&&this.dismiss()})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=M({type:e,selectors:[["tpl-companion-invitation-modal"]],standalone:!0,features:[k],decls:4,vars:1,consts:[[3,"close"],[1,"header"],[4,"tbxSuspense"],[1,"description"],[1,"section"],[1,"section-heading"],[1,"section-heading-content"],[1,"invitation"],["type","text","placeholder","XXXXXXXXXXXX","tplPressEnter","",3,"pressEnter","formControl"],[1,"invitation-submit"],["tpl-button","","color","accent","icon","arrow-right",3,"click"],[1,"note"],[1,"note-item"],["tbxTouchable","",1,"code",3,"click"],[1,"code-value"],[1,"code-action"],["tpl-button","","buttonType","plain","color","accent","size","small","width","auto",1,"section-heading-action",3,"click"]],template:function(n,a){n&1&&(o(0,"tpl-modal",0),d("close",function(){return a.dismiss()}),o(1,"tpl-modal-header",1),r(2,"\u540C\u884C\u8005\u306E\u8FFD\u52A0"),s(),g(3,Ue,3,3,"ng-container",2),s()),n&2&&(l(3),_("tbxSuspense",a.fetchInvitationCode$))},dependencies:[b,D,he,ce,de,fe,pe,re,V,U,K,ye,ke,I,Te],styles:["tpl-modal[_ngcontent-%COMP%]{--modal-content-background: var(--tpl-color-item-background)}.description[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);border-radius:var(--tpl-radius);color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500;line-height:1.6;margin-bottom:32px;margin-top:12px;padding:24px 16px}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{border-top:1px solid var(--tpl-color-border);margin-top:32px;padding-top:32px}.section[_ngcontent-%COMP%]:last-child{margin-bottom:32px}.section-heading[_ngcontent-%COMP%]{align-items:center;display:flex;font-weight:600;justify-content:space-between}.section-heading[_ngcontent-%COMP%]   .section-heading-action[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.section-heading-content[_ngcontent-%COMP%]{font-size:1.4rem}.section-heading-action[_ngcontent-%COMP%]{margin-left:12px}.code[_ngcontent-%COMP%]{align-items:center;border:2px solid var(--tpl-color-border);cursor:pointer;display:flex;justify-content:space-between;margin-top:12px;padding:16px 12px;transition:opacity .2s ease-out;width:100%}.code.activated[_ngcontent-%COMP%]{opacity:.75}.code-value[_ngcontent-%COMP%]{flex:1;font-size:1.5rem;font-weight:600;line-height:1.4;text-align:left;word-break:break-all}.code-action[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent-shade);color:var(--tpl-color-text-light);flex-shrink:0;font-size:1rem;font-weight:600;margin-left:8px;padding:2px 6px}.note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;margin-top:12px}.note-item[_ngcontent-%COMP%]{line-height:1.4;margin-left:1em;text-indent:-1em}.note-item[_ngcontent-%COMP%] + .note-item[_ngcontent-%COMP%]{margin-top:4px}.invitation[_ngcontent-%COMP%]{margin-top:16px}.invitation-submit[_ngcontent-%COMP%]{margin-top:16px;text-align:center}"],changeDetection:0});let i=e;return i})();var Ke=(i,e)=>e.id;function ze(i,e){if(i&1&&r(0),i&2){let u=c();q(" \u3042\u3068",u.dialogData.requiredCompanionCount-u.selectedCompanions.length,"\u4EBA\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044 ")}}function je(i,e){if(i&1&&r(0),i&2){let u=c();q(" ",u.selectedCompanions.length-u.dialogData.requiredCompanionCount,"\u4EBA\u306E\u9078\u629E\u3092\u89E3\u9664\u3057\u3066\u304F\u3060\u3055\u3044 ")}}function $e(i,e){i&1&&r(0," \u540C\u884C\u8005\u306E\u9078\u629E\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F ")}function We(i,e){if(i&1){let u=y();o(0,"div",11),d("click",function(){let n=p(u).$implicit,a=c(2);return h(a.selectCompanion(n))}),o(1,"div",12)(2,"div",13),r(3),s()(),o(4,"div",14)(5,"div",15),v(6,"tbx-icon",16),s()()()}if(i&2){let u=e.$implicit,t=c(2);X("selected",t.isSelected(u)),l(3),C(u.name)}}function Xe(i,e){i&1&&(o(0,"div",9)(1,"div",17),r(2,"\u540C\u884C\u8005\u304C\u3044\u307E\u305B\u3093"),s(),o(3,"div",17),r(4,"\u30DE\u30A4\u30DA\u30FC\u30B8\u3088\u308A\u540C\u884C\u8005\u306E\u8A2D\u5B9A\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044"),s()())}function qe(i,e){if(i&1){let u=y();o(0,"div",4),P(1,We,7,3,"div",8,Ke,!1,Xe,5,0,"div",9),o(4,"tbx-infinite-scroll",10),d("infiniteScroll",function(n){p(u);let a=c();return h(a.onScrolled(n))}),v(5,"tpl-loader-block"),s()()}if(i&2){let u=e,t=c();l(),w(u.companions),l(3),_("disabled",u.companions.length===0||t.loaded)}}var Ae=(()=>{let e=class e{constructor(){this.loaded=!1,this.dialogData=m(oe),this.dialogRef=m(R),this.cdRef=m(te),this.store=m(T),this.toastService=m(Me),this.companionService=m(O),this.loadingMore=!1,this.state$=Z({companions:this.store.select(z)}),this.selectedCompanions=[...this.dialogData.currentCompanions]}ngOnInit(){this.loaded=!1,this.companionService.fetchCompanions(!0).subscribe()}onScrolled(t){if(this.companionService.companionsPage.isComplete){t.complete(),this.loaded=!0;return}this.loadingMore||(this.loadingMore=!0,this.companionService.fetchCompanions(!1).subscribe({next:()=>{this.loadingMore=!1,t.complete()},error:()=>{this.loadingMore=!1,t.complete()}}))}dismiss(){this.dialogRef.close()}isSelected(t){return this.selectedCompanions.some(n=>n.id===t.id)}selectCompanion(t){if(this.isSelected(t))this.selectedCompanions=this.selectedCompanions.filter(a=>a.id!==t.id);else{if(this.selectedCompanions.length>=this.dialogData.requiredCompanionCount){this.toastService.open({message:"\u3053\u308C\u4EE5\u4E0A\u9078\u629E\u51FA\u6765\u307E\u305B\u3093",duration:3e3});return}this.selectedCompanions.push(t)}this.cdRef.markForCheck()}complete(){this.selectedCompanions.length===this.dialogData.requiredCompanionCount&&this.dialogRef.close({companions:this.selectedCompanions})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=M({type:e,selectors:[["tpl-companion-selector-modal"]],standalone:!0,features:[k],decls:17,vars:5,consts:[[3,"close"],[1,"header"],[1,"header-title"],[1,"header-note"],[1,"list"],["slot","end",1,"actions"],["tpl-button","","size","small","color","basic-light","buttonType","stroked","width","auto",3,"click"],["tpl-button","","size","small","color","accent","buttonType","filled","width","auto","icon","arrow-right",3,"click","disabled"],[1,"companion",3,"selected"],[1,"empty"],[3,"infiniteScroll","disabled"],[1,"companion",3,"click"],[1,"companion-body"],[1,"companion-name"],[1,"companion-value"],[1,"companion-check"],["name","check",1,"companion-check-icon"],[1,"empty-text"]],template:function(n,a){if(n&1&&(o(0,"tpl-modal",0),d("close",function(){return a.dismiss()}),o(1,"tpl-modal-header")(2,"div",1)(3,"div",2),r(4,"\u540C\u884C\u8005\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044"),s(),o(5,"div",3),g(6,ze,1,1)(7,je,1,1)(8,$e,1,0),s()()(),g(9,qe,6,2,"div",4),E(10,"async"),o(11,"tpl-modal-footer")(12,"div",5)(13,"button",6),d("click",function(){return a.dismiss()}),r(14," \u30AD\u30E3\u30F3\u30BB\u30EB "),s(),o(15,"button",7),d("click",function(){return a.complete()}),r(16," \u540C\u884C\u8005\u3068\u3057\u3066\u8A2D\u5B9A\u3059\u308B "),s()()()()),n&2){let f;l(6),S(a.dialogData.requiredCompanionCount-a.selectedCompanions.length>0?6:a.dialogData.requiredCompanionCount-a.selectedCompanions.length<0?7:a.dialogData.requiredCompanionCount===a.selectedCompanions.length?8:-1),l(3),S((f=F(10,3,a.state$))?9:-1,f),l(6),_("disabled",a.selectedCompanions.length!==a.dialogData.requiredCompanionCount)}},dependencies:[b,D,H,U,ge,K,ue,I,N],styles:["tpl-modal-header[_ngcontent-%COMP%]{--align-items: center}.header-note[_ngcontent-%COMP%]{color:var(--tpl-color-accent);font-size:1.3rem}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.companion[_ngcontent-%COMP%]{align-items:center;background-color:var(--tpl-color-item-background);border:2px solid transparent;border-radius:6px;box-shadow:0 3px 6px #00000026;cursor:pointer;display:flex;padding:8px 16px;transition:all .15s}.companion[_ngcontent-%COMP%] + .companion[_ngcontent-%COMP%]{margin-top:12px}.companion.selected[_ngcontent-%COMP%]{border-color:var(--tpl-color-primary)}.companion.selected[_ngcontent-%COMP%]   .companion-check[_ngcontent-%COMP%]{background-color:var(--tpl-color-primary)}.companion.selected[_ngcontent-%COMP%]   .companion-check-icon[_ngcontent-%COMP%]{display:block}.companion-body[_ngcontent-%COMP%]{flex:1}.companion-check[_ngcontent-%COMP%]{align-items:center;background-color:var(--tpl-color-border);border-radius:50%;display:flex;height:30px;justify-content:center;width:30px}.companion-check-icon[_ngcontent-%COMP%]{color:var(--tpl-color-primary-contrast);display:none;font-size:2rem}.companion-name[_ngcontent-%COMP%]{flex:1;font-size:1.5rem;min-width:0}.empty[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.5rem;font-weight:500;margin:24px 16px;text-align:center}.empty-text[_ngcontent-%COMP%] + .empty-text[_ngcontent-%COMP%]{margin-top:8px}tpl-modal-footer[_ngcontent-%COMP%]{--end-margin-left: 0px}.actions[_ngcontent-%COMP%]{display:flex}.actions[_ngcontent-%COMP%]   button[tpl-button][_ngcontent-%COMP%] + button[tpl-button][_ngcontent-%COMP%]{margin-left:8px}"],changeDetection:0});let i=e;return i})();var Pe=(()=>{let e=class e{constructor(){this.dialog=m(se)}openCompanionSelectorModal(t){return this.dialog.open(Ae,{maxWidth:"500px",width:"95%",data:t})}selectCompanion(t){return x(this,null,function*(){let n=this.openCompanionSelectorModal(t);return A(n.closed)})}openCompanionInvitationModal(){return this.dialog.open(Be,{maxWidth:"500px",width:"95%"})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ze=(i,e)=>e.id;function Ge(i,e){if(i&1){let u=y();o(0,"div",12)(1,"div",15),r(2),s(),o(3,"button",16),d("click",function(){let n=p(u).$implicit,a=c(3);return h(a.deleteCompanion(n.id))}),r(4," \u524A\u9664 "),s()()}if(i&2){let u=e.$implicit;l(2),C(u.name)}}function Ye(i,e){i&1&&(o(0,"tpl-empty-state",13),r(1,"\u540C\u884C\u8005\u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093"),s())}function Qe(i,e){if(i&1){let u=y();o(0,"div",4)(1,"div",5)(2,"button",6),d("click",function(){p(u);let n=c(2);return h(n.openInvitationModal())}),r(3,"\u540C\u884C\u8005\u3092\u8FFD\u52A0\u3059\u308B"),s()(),o(4,"div",7)(5,"div",8),r(6,"\u203B\u540C\u884C\u8005\u69D8\u3082\u4F1A\u54E1\u767B\u9332\u3057\u3066\u3044\u305F\u3060\u304F\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"),s(),o(7,"div",8),r(8," \u203B\u30C1\u30B1\u30C3\u30C8\u304A\u7533\u8FBC\u307F\u6642\u306B\u540C\u884C\u8005\u306E\u767B\u9332\u304C\u5FC5\u8981\u306A\u516C\u6F14\u306E\u5834\u5408\u3001\u304A\u7533\u8FBC\u307F\u6642\u306B\u540C\u884C\u8005\u4E00\u89A7\u304B\u3089\u540C\u884C\u8005\u3092\u9078\u629E\u3057\u3066\u8A2D\u5B9A\u3057\u307E\u3059\u3002 \u30C1\u30B1\u30C3\u30C8\u304A\u7533\u8FBC\u307F\u6642\u306B\u540C\u884C\u8005\u767B\u9332\u304C\u5FC5\u8981\u306A\u3044\u516C\u6F14 (\u5F8C\u65E5\u30C1\u30B1\u30C3\u30C8\u3092\u5206\u914D\u3057\u3066\u3044\u305F\u3060\u304F\u516C\u6F14) \u306E\u5834\u5408\u3001\u5F53\u30DA\u30FC\u30B8\u3067\u306E\u540C\u884C\u8005\u8A2D\u5B9A\u306F\u4E0D\u8981\u3067\u3059\u3002 "),s(),o(9,"div",8),r(10," \u203B\u30C1\u30B1\u30C3\u30C8\u304A\u7533\u8FBC\u307F\u6642\u306B\u540C\u884C\u8005\u767B\u9332\u304C\u5FC5\u8981\u304B\u3069\u3046\u304B\u306F\u3001\u516C\u6F14\u3084\u53D7\u4ED8\u306B\u3088\u308A\u7570\u306A\u308A\u307E\u3059\u3002\u5404\u53D7\u4ED8\u30DA\u30FC\u30B8\u7B49\u306E\u3054\u6848\u5185\u3092\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002 "),s()()(),o(11,"div",4)(12,"tpl-section-header",9)(13,"button",10),d("click",function(){p(u);let n=c(2);return h(n.reloadCompanions())}),r(14," \u66F4\u65B0\u3059\u308B "),s()(),o(15,"div",11),P(16,Ge,5,1,"div",12,Ze,!1,Ye,2,0,"tpl-empty-state",13),o(19,"tbx-infinite-scroll",14),d("infiniteScroll",function(n){p(u);let a=c(2);return h(a.onInfinite(n))}),v(20,"tpl-loader-block"),s()()()}if(i&2){let u=e,t=c(2);l(16),w(u.companions),l(3),_("disabled",u.companions.length===0||t.loaded)}}function Je(i,e){if(i&1&&(o(0,"div",3),g(1,Qe,21,2),E(2,"async"),v(3,"tpl-mypage-back-button"),s()),i&2){let u,t=c();l(),S((u=F(2,1,t.state$))?1:-1,u)}}var we=(()=>{let e=class e{constructor(){this.loaded=!1,this.store=m(T),this.companionService=m(O),this.companionUsecase=m(j),this.companionModalService=m(Pe),this.loadingMore=!1,this.state$=L({companions:this.store.select(z)}),this.fetchCompanions$=this.companionService.fetchCompanions(!0)}reloadCompanions(){this.companionService.fetchCompanions(!0).subscribe()}openInvitationModal(){return x(this,null,function*(){let t=this.companionModalService.openCompanionInvitationModal();yield A(t.closed),this.reloadCompanions()})}deleteCompanion(t){this.companionUsecase.deleteCompanion(t)}onInfinite(t){if(this.companionService.companionsPage.isComplete){t.complete(),this.loaded=!0;return}this.loadingMore||(this.loadingMore=!0,this.companionService.fetchCompanions(!1).subscribe({next:()=>{this.loadingMore=!1,t.complete()},error:()=>{this.loadingMore=!1,t.complete()}}))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=M({type:e,selectors:[["page-companion-list"]],standalone:!0,features:[k],decls:11,vars:1,consts:[["routerLink","/"],["routerLink","/mypage"],["class","page-content",4,"tbxSuspense"],[1,"page-content"],[1,"section"],[1,"add-companion"],["tpl-button","","color","accent","icon","arrow-right",3,"click"],[1,"note"],[1,"note-item"],["title","\u540C\u884C\u8005\u4E00\u89A7"],["tpl-button","","buttonType","plain","color","accent","size","small","width","auto",3,"click"],[1,"list"],[1,"companion"],[1,"empty"],[3,"infiniteScroll","disabled"],[1,"companion-name"],["tpl-button","","size","small","width","auto",1,"companion-action",3,"click"]],template:function(n,a){n&1&&(o(0,"tpl-breadcrumb")(1,"tpl-breadcrumb-item")(2,"a",0),r(3,"TICKET"),s()(),o(4,"tpl-breadcrumb-item")(5,"a",1),r(6,"\u30DE\u30A4\u30DA\u30FC\u30B8"),s()(),o(7,"tpl-breadcrumb-item")(8,"span"),r(9,"\u540C\u884C\u8005\u8A2D\u5B9A"),s()()(),g(10,Je,4,3,"div",2)),n&2&&(l(10),_("tbxSuspense",a.fetchCompanions$))},dependencies:[b,D,Ie,ie,V,I,be,ve,Ce,_e,Se,H,N],styles:["tpl-breadcrumb[_ngcontent-%COMP%]{margin:-32px -24px 0}.page-content[_ngcontent-%COMP%]{margin-top:32px}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{margin-top:32px}.add-companion[_ngcontent-%COMP%]{display:flex;justify-content:center}.note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;margin-top:16px}.note-item[_ngcontent-%COMP%]{line-height:1.4;margin-left:1em;text-indent:-1em}.note-item[_ngcontent-%COMP%] + .note-item[_ngcontent-%COMP%]{margin-top:4px}.companion[_ngcontent-%COMP%]{align-items:center;border-bottom:1px solid var(--tpl-color-border);display:flex;justify-content:space-between;padding:12px 0}.companion-name[_ngcontent-%COMP%]{flex:1;font-size:1.6rem;min-width:0}.companion-action[_ngcontent-%COMP%]{flex-shrink:0;margin-left:12px}.empty[_ngcontent-%COMP%]{margin-top:16px}"]});let i=e;return i})();function Re(){return[xe(Ee,Fe)]}var et=[{path:"",component:we,providers:[Re()]}],Ni=et;export{Te as a,St as b,Pe as c,Re as d,et as e,Ni as f};
//# sourceMappingURL=chunk-RIUV53M2.js.map
