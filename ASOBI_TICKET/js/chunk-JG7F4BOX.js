import{b as R}from"./chunk-JSBJBRQD.js";import{b as I}from"./chunk-FOLYN2CC.js";import{b as y,c as P,e as O,g as E,i as V,m as B,n as T,q as U,r as D,y as k}from"./chunk-I3RHSA6D.js";import{a as w}from"./chunk-DBRRJBUZ.js";import{$a as r,Aa as h,Bc as b,Eb as S,Qa as x,Sa as g,Wa as v,_ as i,_a as a,ab as C,ba as d,eb as F,gb as _,h as c,ib as u,ic as M,ka as p,la as f,t as l,tb as m}from"./chunk-I424EGRW.js";function L(n,e){if(n&1){let s=F();a(0,"div",0)(1,"div",1),m(2,"\u540C\u884C\u8005\u306E\u540C\u884C\u8005\u767B\u9332\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u3057\u3066\u304F\u3060\u3055\u3044"),r(),a(3,"div",2)(4,"tpl-form-field")(5,"tpl-form-label"),m(6,"\u30B3\u30FC\u30C9"),r(),C(7,"input",3),r(),a(8,"div",4)(9,"button",5),_("click",function(){p(s);let t=u();return f(t.acceptInvitation())}),m(10," \u9001\u4FE1 "),r()()()()}if(n&2){let s=u();h(7),g("formControl",s.codeForm)}}var A=(()=>{let e=class e{constructor(){this.codeForm=new E("",{nonNullable:!0,validators:[P.required]}),this.router=i(b),this.sessionService=i(I),this.companionUsecase=i(k),this.authModalService=i(R)}ngOnInit(){this.handleLanding()}handleLanding(){return c(this,null,function*(){if(!(yield l(this.sessionService.isSignedIn$))){let t=this.authModalService.openAuthModal({headerText:"\u62DB\u5F85\u3092\u627F\u8A8D\u3059\u308B\u306B\u306F\u30ED\u30B0\u30A4\u30F3\u304C\u5FC5\u8981\u3067\u3059",returnPath:`/invitation/handler${this.code?`?code=${this.code}`:""}`});yield l(t.closed),this.router.navigate(["/"],{replaceUrl:!0});return}this.code&&(yield this.companionUsecase.handleInvitation(this.code),this.router.navigate(["/mypage/companions"]))})}acceptInvitation(){return c(this,null,function*(){if(this.codeForm.invalid)return;let o=this.codeForm.value;o&&(yield this.companionUsecase.handleInvitation(o))&&this.router.navigate(["/mypage/companions"])})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["page-companion-invitation-handler"]],inputs:{code:"code"},standalone:!0,features:[S],decls:1,vars:1,consts:[[1,"container"],[1,"title"],[1,"form"],["type","text","placeholder","xxxxxxxxxxxx",3,"formControl"],[1,"form-submit"],["tpl-button","","color","primary","buttonType","filled","icon","arrow-right","width","fixed",3,"click"]],template:function(t,H){t&1&&x(0,L,11,1,"div",0),t&2&&v(H.code?-1:0)},dependencies:[M,B,y,O,T,V,w,U,D],styles:[".container[_ngcontent-%COMP%]{margin:40px auto 0;max-width:500px}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:500;margin-bottom:16px;margin-right:16px}.form[_ngcontent-%COMP%]{margin-top:32px}.form-submit[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.form-submit[_ngcontent-%COMP%]   button[tpl-button][_ngcontent-%COMP%]{font-size:1.4rem}"]});let n=e;return n})();var $=[{path:"handler",component:A}],rt=$;export{$ as a,rt as b};
//# sourceMappingURL=chunk-JG7F4BOX.js.map
