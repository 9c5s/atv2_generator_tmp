import{a as Rt,b as X}from"./chunk-ZPPKZYT3.js";import{a as Lt}from"./chunk-ESNIDSRU.js";import{Q as Jt,R as Yt,W as Zt,a as Ft,d as Ue,e as Ne,g as Tt,h as Ot,m as qt,n as We,o as Qe,p as Ke,q as Ge,r as Je,s as Ye}from"./chunk-JIHS3ZDA.js";import{k as Nt,n as Wt,o as Qt,p as Kt}from"./chunk-LLO25EU3.js";import{a as Pt,b as $,c as Gt}from"./chunk-6BQ47HOA.js";import{a as It}from"./chunk-Q3ZDF7N3.js";import{a as He,b as Ve}from"./chunk-GQ2Y3PYG.js";import{h as jt,i as Ce}from"./chunk-FOLYN2CC.js";import{a as Z,c as $t}from"./chunk-AWGLQW6G.js";import{c as $e,e as Mt,g as me,i as Dt,m as At,n as Bt,o as kt}from"./chunk-I3RHSA6D.js";import{h as je}from"./chunk-KLXVAUUB.js";import{B as ne,r as Ie,s as Te,t as xt,w as pe,x as qe,y as de,z as ze}from"./chunk-KZ3A2NRO.js";import{a as T}from"./chunk-DBRRJBUZ.js";import{a as Ut}from"./chunk-ZNRADN3H.js";import{b as te,c as St,d as J,e as Y,f as wt,g as Se,h as Pe,i as fe,j as Fe,k as zt,l as Ht,n as Me,o as Vt}from"./chunk-264EOGRT.js";import{$a as r,A as at,Aa as l,Cc as se,Eb as g,Fb as z,H as K,Hb as h,Hc as vt,Ib as j,Jb as S,La as Ae,Pb as gt,Qa as d,Qc as Oe,Ra as mt,Rb as I,S as ae,Sa as m,Sc as Et,Ua as ce,Vc as ue,W as k,Wa as p,Xa as G,Xc as Le,Ya as E,Za as b,_ as C,_a as a,_c as bt,a as W,ab as f,ac as ke,b as re,ba as y,bb as Be,cb as we,eb as B,fc as Re,gb as P,gc as L,h as w,ib as u,ic as x,jb as dt,ka as M,kb as ft,la as D,lc as ht,mb as Ct,nb as _t,ob as yt,qa as ut,qc as le,r as Q,ra as ie,t as O,ta as H,tb as s,ub as v,v as q,vb as A,w as st,wb as V,ya as pt}from"./chunk-I424EGRW.js";var zn=["*"],Xt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-page-title"]],standalone:!0,features:[g],ngContentSelectors:zn,decls:1,vars:0,template:function(o,c){o&1&&(dt(),ft(0))},dependencies:[x],styles:['[_nghost-%COMP%]{border-bottom:3px solid var(--tpl-color-border);color:var(--tpl-color-text);display:block;font-family:var(--tpl-latin-font-family);font-size:1.4rem;font-weight:700;line-height:17px;padding-bottom:6px;position:relative}[_nghost-%COMP%]:before{background-color:currentcolor;bottom:-3px;content:"";height:3px;left:0;position:absolute;width:92px}'],changeDetection:0});let e=t;return e})();function De(e){return Lt(new Date,e)}function Ze(e){let t=e.paymentDeadlineAt??e.reception.depositPeriodEndsAt;return e.status==="won_not_paid"&&!!t&&!De(t)}function _e(e){let t=e.paymentDeadlineAt??e.reception.depositPeriodEndsAt;return e.status==="won_not_paid"&&!!t&&De(t)}function en(e){switch(e.status){case"before_lottery":return"\u62BD\u9078\u5F85\u3061";case"won_pending":return"\u5F53\u9078\u30FB\u5165\u91D1\u6E96\u5099\u4E2D";case"won_not_paid":let t=e.paymentDeadlineAt??e.reception.depositPeriodEndsAt;return t&&!De(t)?["lottery","resale_lottery"].includes(e.reception.entryType)?"\u5F53\u9078\u30FB\u5165\u91D1\u5F85\u3061":"\u5165\u91D1\u5F85\u3061":"\u5165\u91D1\u671F\u9650\u5207\u308C";case"won_paid":return["lottery","resale_lottery"].includes(e.reception.entryType)?"\u5F53\u9078\u30FB\u5165\u91D1\u5B8C\u4E86":"\u5165\u91D1\u5B8C\u4E86";case"canceled":return"\u30AD\u30E3\u30F3\u30BB\u30EB";case"lost":return"\u843D\u9078"}}var Xe=(()=>{let t=class t{get statusText(){return en(this.entry)}get colorType(){return this.entry.status==="lost"||_e(this.entry)?"disabled":this.entry.status==="won_paid"||this.entry.status==="won_pending"?"primary":this.entry.status==="canceled"?"canceled":this.entry.status==="won_not_paid"?"warning":""}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-entry-history-status"]],inputs:{entry:"entry"},standalone:!0,features:[g],decls:3,vars:2,consts:[[1,"status",3,"ngClass"]],template:function(o,c){o&1&&(a(0,"div",0)(1,"span"),s(2),r()()),o&2&&(m("ngClass",c.colorType),l(2),v(c.statusText))},dependencies:[x,ke],styles:[".status[_ngcontent-%COMP%]{align-items:center;border:2px solid var(--tpl-color-accent);color:var(--tpl-color-accent);display:inline-grid;font-size:1.3rem;font-weight:700;gap:6px;grid-auto-flow:column;grid-template-rows:auto;line-height:140%;padding:2px 14px}.status.primary[_ngcontent-%COMP%]{background-color:var(--tpl-color-accent);color:var(--tpl-color-accent-contrast)}.status.disabled[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);border-color:var(--tpl-color-background-accent);color:var(--tpl-color-text)}.status.warning[_ngcontent-%COMP%]{background-color:var(--tpl-color-attention);border-color:var(--tpl-color-attention);color:#fff}.status.canceled[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);border-color:var(--tpl-color-text-light);color:var(--tpl-color-text-light)}"],changeDetection:0});let e=t;return e})();var oe=(e,t)=>t.id,Hn=(e,t)=>t.choice.id,tn=e=>({rank:e});function Vn(e,t){e&1&&(a(0,"span",18),s(1,"\u5F53\u9078"),r())}function jn(e,t){e&1&&(a(0,"span",19),s(1,"\u843D\u9078"),r())}function Un(e,t){if(e&1&&(a(0,"div",7)(1,"div",2),s(2),h(3,"ticketLocale"),h(4,"ticketLocale"),r(),d(5,Vn,2,0,"span",18)(6,jn,2,0,"span",19),r()),e&2){let n=u(),i=n.$implicit,o=n.$index,c=u();l(2),A(" ",c.entry.reception.choicesUnranked?S(3,3,"shared.entry.unrankedChoiceLabel",z(9,tn,o+1)):S(4,6,"shared.entry.rankedChoiceLabel",z(11,tn,o+1))," "),l(3),p(i.won===!0?5:-1),l(),p(i.won===!1?6:-1)}}function Nn(e,t){if(e&1&&(a(0,"div",24),s(1),r()),e&2){let n=t.$implicit;l(),A(" ",n.name," ")}}function Wn(e,t){if(e&1&&(a(0,"div",23),E(1,Nn,2,1,"div",24,oe),r()),e&2){let n=u().$implicit;l(),b(n.companions)}}function Qn(e,t){if(e&1&&(a(0,"tpl-payment-list-item",17)(1,"div",20)(2,"span",21),s(3),r(),a(4,"span",22),s(5),r()(),d(6,Wn,3,0,"div",23),r()),e&2){let n=t.$implicit,i=u().$implicit;m("amount",n.quantity*n.seatPlan.price)("quantity",n.quantity)("unitAmount",n.seatPlan.price),l(3),A("",i.seat.name," "),l(2),v(n.seatPlan.name),l(),p(n.companions.length>0?6:-1)}}function Kn(e,t){if(e&1&&(a(0,"tpl-payment-list-item",17)(1,"div",25),s(2),r()()),e&2){let n=t.$implicit;m("amount",n.amount)("quantity",n.quantity)("unitAmount",n.unitAmount),l(2),A(" ",n.name," ")}}function Gn(e,t){if(e&1&&(a(0,"tpl-payment-list-item",17)(1,"div",25),s(2),r()()),e&2){let n=t.$implicit;m("amount",n.amount)("quantity",n.quantity)("unitAmount",n.unitAmount),l(2),A(" ",n.name," ")}}function Jn(e,t){if(e&1&&(a(0,"div",6),d(1,Un,7,13,"div",7),a(2,"div",8)(3,"div",9)(4,"div",10),s(5),h(6,"date"),r(),a(7,"div",11),s(8),r(),f(9,"tpl-reception-act-time",12),r(),a(10,"div",13)(11,"div",14)(12,"div",15)(13,"tpl-payment-list-summary",16),E(14,Qn,7,6,"tpl-payment-list-item",17,oe),E(16,Kn,3,4,"tpl-payment-list-item",17,oe),E(18,Gn,3,4,"tpl-payment-list-item",17,oe),r()()()()()()),e&2){let n=t.$implicit,i=u();ce("won",i.isMultipleChoices&&i.isShowWonStatus&&n.won===!0)("lost",i.isMultipleChoices&&i.isShowWonStatus&&n.won===!1),l(),p(i.isMultipleChoices?1:-1),l(4),v(S(6,10,n.act.performanceDate,"yyyy\u5E74M\u6708d\u65E5")),l(3),v(n.act.venue),l(),m("act",n.act),l(4),m("totalAmount",n.amount)("hideSummary",!i.isMultipleChoices),l(),b(n.seatPlanChoices),l(2),b(n.fees),l(2),b(n.estimatedFees)}}function Yn(e,t){e&1&&(a(0,"div",2),s(1,"\u5408\u8A08\u91D1\u984D"),r())}function Zn(e,t){if(e&1&&(a(0,"tpl-payment-list-item",4)(1,"div",26),s(2),r(),f(3,"tpl-entry-choice-info",27),r()),e&2){let n=t.$implicit;m("amount",n.choice.amount),l(2),A(" ",n.name," "),l(),m("choice",n.choice)}}function Xn(e,t){if(e&1&&E(0,Zn,4,3,"tpl-payment-list-item",4,Hn),e&2){let n=u();b(n.choiceItems)}}function ei(e,t){if(e&1&&(a(0,"tpl-payment-list-item",4)(1,"div",25),s(2),r()()),e&2){let n=t.$implicit;m("amount",n.amount),l(2),A(" ",n.name," ")}}function ti(e,t){if(e&1&&(a(0,"tpl-payment-list-item",4)(1,"div",25),s(2),r()()),e&2){let n=t.$implicit;m("amount",n.amount),l(2),A(" ",n.name," ")}}function ni(e,t){if(e&1&&(a(0,"tpl-payment-list-item",4)(1,"div",25),s(2),r()()),e&2){let n=u();m("amount",n.entry.estimatedPaymentFee.amount),l(2),A(" ",n.entry.estimatedPaymentFee.name," ")}}function ii(e,t){if(e&1&&(a(0,"tpl-payment-list-item",4)(1,"div",25),s(2),r()()),e&2){let n=u();m("amount",n.entry.paymentFee.amount),l(2),A(" ",n.entry.paymentFee.name," ")}}function oi(e,t){e&1&&(a(0,"div",5),s(1,"\u5F53\u9078\u3057\u305F\u5834\u5408\u306E\u6700\u5927\u304A\u652F\u6255\u3044\u91D1\u984D\u3067\u3059"),r())}var nn=(()=>{let t=class t{constructor(){this.changed=new H,this.ticketLocaleService=C(jt)}get isShowWonStatus(){return["lottery","resale_lottery"].includes(this.entry.reception.entryType)&&["won_pending","won_not_paid","won_paid"].includes(this.entry.status)}get isEstimatedAmount(){return["lottery","resale_lottery"].includes(this.entry.reception.entryType)&&!["won_pending","won_not_paid","won_paid"].includes(this.entry.status)}get totalAmount(){return(this.isEstimatedAmount?this.entry.amountEstimated:this.entry.amount)??0}get choiceItems(){return this.entry.choices.map((i,o)=>({name:this.ticketLocaleService.translate(this.entry.reception.choicesUnranked?"shared.entry.unrankedChoiceLabel":"shared.entry.rankedChoiceLabel",{rank:o+1}),choice:i})).filter(({choice:i})=>this.entry.reception.entryType==="fcfs"||this.isEstimatedAmount||i.won)}get isMultipleChoices(){return this.entry.choices.length>1}get isSingleChoice(){return this.entry.choices.length===1}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-entry-info-detail"]],inputs:{entry:"entry"},outputs:{changed:"changed"},standalone:!0,features:[g],decls:13,vars:8,consts:[[1,"choice",3,"won","lost"],[1,"payment-total-summary"],[1,"title"],[3,"totalAmount"],[3,"amount"],[1,"payment-summary-note"],[1,"choice"],[1,"choice-header"],[1,"choice-body"],[1,"choice-act"],[1,"choice-act-date"],[1,"choice-act-venue"],[1,"choice-act-time",3,"act"],[1,"content"],[1,"payment-summary"],["slot","content"],[3,"totalAmount","hideSummary"],[3,"amount","quantity","unitAmount"],[1,"status-won"],[1,"status-lost"],[1,"seat"],[1,"seat-name"],[1,"seat-plan-name"],[1,"seat-companion"],[1,"companion-name"],[1,"fee-label"],[1,"choice-label"],[3,"choice"]],template:function(o,c){o&1&&(E(0,Jn,20,13,"div",0,oe),a(2,"div",1),d(3,Yn,2,0,"div",2),a(4,"tpl-payment-list-summary",3),d(5,Xn,2,0),E(6,ei,3,2,"tpl-payment-list-item",4,oe),E(8,ti,3,2,"tpl-payment-list-item",4,oe),d(10,ni,3,2,"tpl-payment-list-item",4)(11,ii,3,2,"tpl-payment-list-item",4),r(),d(12,oi,2,0,"div",5),r()),o&2&&(b(c.entry.choices),l(2),ce("single",!c.isMultipleChoices),l(),p(c.isMultipleChoices?3:-1),l(),m("totalAmount",c.totalAmount),l(),p(c.isMultipleChoices?5:-1),l(),b(c.entry.fees),l(2),b(c.entry.estimatedFees),l(2),p(c.entry.estimatedPaymentFee?10:-1),l(),p(c.entry.paymentFee?11:-1),l(),p((c.entry.reception.entryType==="lottery"||c.entry.reception.entryType==="resale_lottery")&&c.entry.status==="before_lottery"?12:-1))},dependencies:[x,L,Ce,Qe,Ke,Ge,Ye],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500}.choice[_ngcontent-%COMP%] + .choice[_ngcontent-%COMP%]{margin-top:40px}.choice.lost[_ngcontent-%COMP%]   .choice-act[_ngcontent-%COMP%], .choice.lost[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{opacity:.5}.choice-header[_ngcontent-%COMP%]{align-items:flex-end;display:flex;justify-content:space-between;margin-bottom:8px}.choice-header[_ngcontent-%COMP%]   .status-won[_ngcontent-%COMP%], .choice-header[_ngcontent-%COMP%]   .status-lost[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;padding:4px 16px}.choice-header[_ngcontent-%COMP%]   .status-won[_ngcontent-%COMP%]{background-color:var(--tpl-color-accent);color:var(--tpl-color-accent-contrast)}.choice-header[_ngcontent-%COMP%]   .status-lost[_ngcontent-%COMP%]{background-color:var(--tpl-color-disabled);color:var(--tpl-color-text-light)}.choice-act[_ngcontent-%COMP%]{background-color:var(--tpl-color-form-background);padding:12px 16px}.choice-act-venue[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:700}.choice-act-meta[_ngcontent-%COMP%]{display:flex}.choice-act-date[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;margin-bottom:4px}.choice-act-time[_ngcontent-%COMP%]{--font-size: 1.4rem;color:var(--tpl-color-text-light);margin-top:4px}.content[_ngcontent-%COMP%]{margin-top:1px}.seat[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600}.seat-name[_ngcontent-%COMP%]{display:inline-block}.seat-plan-name[_ngcontent-%COMP%]{display:inline-block;margin-left:8px}.seat-companion[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:4px 0}.companion-name[_ngcontent-%COMP%]{font-size:1.4rem}.companion-name[_ngcontent-%COMP%] + .companion-name[_ngcontent-%COMP%]{margin-left:8px}.fee-label[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:500}.choice-label[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500;margin-bottom:4px}.payment-total-summary[_ngcontent-%COMP%]{margin-top:24px}.payment-total-summary.single[_ngcontent-%COMP%]{margin-top:1px}.payment-total-summary[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:8px}.payment-summary-note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:500;margin-top:8px}tpl-payment-list-summary[_ngcontent-%COMP%], tpl-payment-list-item[_ngcontent-%COMP%]{--background: var(--tpl-color-form-background)}"],changeDetection:0});let e=t;return e})();var on=(()=>{let t=class t{constructor(){this.baseUrl="v1/private/entries",this.http=C(le)}fetchEntries({page:i,perPage:o,paymentRequired:c}){let _=new ht().set("page",i.toString()).set("per_page",o.toString());return c&&(_=_.set("status","payment_required")),this.http.get(this.baseUrl,{params:_})}fetchEntryById(i){return this.http.get(`${this.baseUrl}/${i}`)}cancelEntry(i){return this.http.delete(`${this.baseUrl}/${i}`)}payEntry(i){return this.http.post(`${this.baseUrl}/${i}/pay`,{})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function rn(e){return"payments"in e}var ct="entry",ri=Se("[Entry] Set Entries",Pe()),ai=Se("[Entry] Set Entry",Pe()),ci=Se("[Entry] Set Payment Required Entries",Pe()),li=Se("[Entry] Cancel Entry",Pe()),U={setEntries:ri,setEntry:ai,setPaymentRequiredEntries:ci,cancelEntry:li},ye=Ut(),si=ye.getInitialState({paymentRequiredEntries:[]}),ui=Vt(si,Me(U.setEntries,(e,{entries:t,init:n})=>n?ye.setAll(t,e):ye.addMany(t,e)),Me(U.setEntry,(e,{entry:t})=>ye.upsertOne(t,e)),Me(U.setPaymentRequiredEntries,(e,{entries:t})=>re(W({},e),{paymentRequiredEntries:t})),Me(U.cancelEntry,(e,{entry:t})=>re(W({},ye.upsertOne(t,e)),{paymentRequiredEntries:e.paymentRequiredEntries.filter(n=>n.id!==t.id)})));function an(e,t){return ui(e,t)}var{selectEntities:pi,selectAll:mi}=ye.getSelectors(),lt=zt(ct),cn=Fe(lt,mi),ln=Fe(lt,e=>e.paymentRequiredEntries),di=Fe(lt,pi),sn=e=>Fe(di,t=>{let n=t[e];return n&&rn(n)?n:null});var ge=(()=>{let t=class t{constructor(){this.entryPage=new St(50),this.store=C(fe),this.entryApi=C(on)}fetchEntries({init:i}={init:!0}){let o=i?1:this.entryPage.page+1;return this.entryApi.fetchEntries({page:o,perPage:this.entryPage.pageSize}).pipe(ae(c=>{this.store.dispatch(U.setEntries({entries:c,init:i})),this.entryPage.page=o,this.entryPage.setPage(c)}))}fetchPaymentRequiredEntries(){return this.entryApi.fetchEntries({paymentRequired:!0,page:1,perPage:50}).pipe(ae(i=>{this.store.dispatch(U.setPaymentRequiredEntries({entries:i}))}))}fetchEntryById(i){return this.entryApi.fetchEntryById(i).pipe(ae(o=>{this.store.dispatch(U.setEntry({entry:o}))}))}cancelEntry(i){return w(this,null,function*(){let o=this.entryApi.cancelEntry(i).pipe(ae(c=>{this.store.dispatch(U.cancelEntry({entry:c}))}),q(()=>J(!0)),K(c=>Q(Y(new Z("\u30AD\u30E3\u30F3\u30BB\u30EB\u306B\u5931\u6557\u3057\u307E\u3057\u305F",{originalErrorResponse:c})))));return O(o)})}payEntry(i){return w(this,null,function*(){let o=this.entryApi.payEntry(i).pipe(ae(c=>{this.store.dispatch(U.setEntry({entry:c}))}),q(()=>J(!0)),K(c=>Q(Y(new Z("\u304A\u652F\u6255\u3044\u306B\u5931\u6557\u3057\u307E\u3057\u305F",{originalErrorResponse:c})))));return O(o)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var et=(()=>{let t=class t{constructor(){this.clipboard=C(kt),this.alertService=C(ne),this.loaderService=C(pe),this.toastService=C(je),this.entryService=C(ge)}cancelEntry(i){return w(this,null,function*(){if(!(yield this.alertService.showConfirmation({message:"\u7533\u8FBC\u307F\u3092\u30AD\u30E3\u30F3\u30BB\u30EB\u3057\u3066\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",buttonText:"\u7533\u8FBC\u307F\u3092\u30AD\u30E3\u30F3\u30BB\u30EB\u3059\u308B",buttonColor:"attention",cancelButtonText:"\u623B\u308B"})))return!1;let c=this.loaderService.showLoader({message:"\u30AD\u30E3\u30F3\u30BB\u30EB\u4E2D..."}),_=yield this.entryService.cancelEntry(i);return c.close(),_.isSuccess()?(this.toastService.open({message:"\u30AD\u30E3\u30F3\u30BB\u30EB\u3057\u307E\u3057\u305F",duration:3e3}),!0):(this.alertService.showErrorAlertFromResponse(_.error.originalErrorResponse,_.error.message),!1)})}copyEntryNumberToClipboard(i){this.clipboard.copy(i)&&this.toastService.open({message:"\u7533\u8FBC\u756A\u53F7\u3092\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",duration:3e3})}payEntry(i){return w(this,null,function*(){let o=this.loaderService.showLoader({message:"\u6C7A\u6E08\u4E2D..."}),c=yield this.entryService.payEntry(i);return o.close(),c.isSuccess()?(this.toastService.open({message:"\u5165\u91D1\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F",duration:3e3}),!0):(this.alertService.showErrorAlertFromResponse(c.error.originalErrorResponse,c.error.message),!1)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ci(e,t){if(e&1&&f(0,"tpl-card-info",5),e&2){let n=u(2);m("card",n.entry.payments[0].creditCardInfo)("showOnlyInfo",!0)}}function _i(e,t){if(e&1&&f(0,"tpl-card-info",6),e&2){let n=u(2);m("card",n.card)}}function yi(e,t){if(e&1){let n=B();a(0,"button",8),P("click",function(){M(n);let o=u(2);return D(o.changeCard())}),s(1," \u5909\u66F4\u3059\u308B "),r()}}function gi(e,t){if(e&1&&(a(0,"div",2),d(1,Ci,1,2,"tpl-card-info",5)(2,_i,1,1,"tpl-card-info",6)(3,yi,2,0,"button",7),r()),e&2){let n=u();l(),p(n.entry.payments.length>0&&n.entry.payments[0].creditCardInfo?1:n.card?2:-1),l(2),p(n.canChangeCard?3:-1)}}function hi(e,t){if(e&1&&(a(0,"div",3),s(1),r()),e&2){let n=u();l(),v(n.entry.paymentMethod.name)}}function xi(e,t){if(e&1){let n=B();a(0,"div",10),f(1,"tbx-icon",11),a(2,"span"),s(3,"\u304A\u652F\u6255\u3044\u624B\u7D9A\u304D\u306E\u304A\u9858\u3044"),r()(),a(4,"div",12),s(5," \u304A\u652F\u6255\u3044\u304C\u5B8C\u4E86\u3059\u308B\u307E\u3067\u3001\u5F53\u9078\u306F\u78BA\u5B9A\u3055\u308C\u307E\u305B\u3093\u3002\u304A\u652F\u6255\u3044\u65B9\u6CD5\u3092\u78BA\u8A8D\u3057\u3001\u4E0B\u8A18\u306E\u30DC\u30BF\u30F3\u304B\u3089\u304A\u652F\u6255\u3044\u3092\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u671F\u65E5\u307E\u3067\u306B\u5165\u91D1\u304C\u78BA\u8A8D\u3055\u308C\u306A\u3044\u5834\u5408\u3001\u30AD\u30E3\u30F3\u30BB\u30EB\u3068\u306A\u308A\u307E\u3059\u306E\u3067\u3054\u6CE8\u610F\u304F\u3060\u3055\u3044\u3002 "),r(),a(6,"button",13),P("click",function(){M(n);let o=u(2);return D(o.payEntry())}),s(7,"\u6C7A\u6E08\u3092\u5B9F\u884C\u3059\u308B"),r()}}function vi(e,t){if(e&1){let n=B();a(0,"div",10),f(1,"tbx-icon",11),a(2,"span"),s(3,"\u3054\u767B\u9332\u306E\u30AF\u30EC\u30B8\u30C3\u30C8\u30AB\u30FC\u30C9\u304C\u3054\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093"),r()(),a(4,"div",12),s(5," \u3054\u767B\u9332\u6E08\u307F\u30AB\u30FC\u30C9\u306E\u6709\u52B9\u671F\u9650\u3084\u3054\u5229\u7528\u4E0A\u9650\u984D\u306A\u3069\u3092\u3054\u78BA\u8A8D\u306E\u4E0A\u3001\u4E0B\u8A18\u30DC\u30BF\u30F3\u3088\u308A\u6C7A\u6E08\u3092\u518D\u5B9F\u884C\u3057\u3066\u304F\u3060\u3055\u3044\u3002 \u554F\u984C\u304C\u7D9A\u304F\u5834\u5408\u306F\u3001\u4E0A\u8A18\u306E\u304A\u652F\u6255\u3044\u65B9\u6CD5\u300C\u5909\u66F4\u3059\u308B\u300D\u30DC\u30BF\u30F3\u3088\u308A\u3001\u65B0\u3057\u3044\u30AF\u30EC\u30B8\u30C3\u30C8\u30AB\u30FC\u30C9\u306B\u3054\u5909\u66F4\u304F\u3060\u3055\u3044\u3002 \u6C7A\u6E08\u304C\u3067\u304D\u306A\u304B\u3063\u305F\u7406\u7531\u306B\u3064\u304D\u307E\u3057\u3066\u306F\u30AF\u30EC\u30B8\u30C3\u30C8\u30AB\u30FC\u30C9\u4F1A\u793E\u3078\u76F4\u63A5\u304A\u554F\u3044\u5408\u308F\u305B\u304F\u3060\u3055\u3044\u3002 "),r(),a(6,"button",13),P("click",function(){M(n);let o=u(2);return D(o.payEntry())}),s(7,"\u6C7A\u6E08\u3092\u518D\u5B9F\u884C\u3059\u308B"),r()}}function Ei(e,t){e&1&&(a(0,"div",9),s(1),h(2,"date"),r()),e&2&&(l(),A(" ",S(2,1,t,"M\u6708d\u65E5 H:mm")," \u307E\u3067\u306B\u5165\u91D1\u3092\u5B8C\u4E86\u3055\u305B\u3066\u304F\u3060\u3055\u3044 "))}function bi(e,t){if(e&1&&(a(0,"div",4),d(1,xi,8,0)(2,vi,8,0)(3,Ei,3,4,"div",9),r()),e&2){let n,i=u();l(),p(i.entry.paymentMethod.arbitrary?1:2),l(2),p((n=(n=i.entry.paymentDeadlineAt)!==null&&n!==void 0?n:i.entry.reception.depositPeriodEndsAt)?3:-1,n)}}var pn=(()=>{let t=class t{constructor(){this.paymentModalService=C(Kt),this.entryUsecase=C(et)}set setEntry(i){this.entry=i,this.isPaymentRequired=Ze(this.entry),this.isPaymentExpired=_e(this.entry)}get unpaid(){return["kj_credit_card_v1","gmo_arbitrary_credit_card_v1","gmo_credit_card_v1"].includes(this.entry.paymentMethod.id)&&this.isPaymentRequired}get canChangeCard(){let i=["before_lottery","won_pending"];return this.isPaymentRequired||i.includes(this.entry.status)}get isHideCardInfoStatus(){return["canceled","lost"].includes(this.entry.status)}payEntry(){this.entryUsecase.payEntry(this.entry.id)}changeCard(){this.paymentModalService.openRegisterCardModal()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-entry-payment-method"]],inputs:{setEntry:[0,"entry","setEntry"],card:"card"},standalone:!0,features:[g],decls:8,vars:2,consts:[["slot","header"],["slot","content"],[1,"card"],[1,"payment-method-name"],[1,"pay"],[3,"card","showOnlyInfo"],[3,"card"],["tpl-button","","color","accent","buttonType","plain","size","small","width","auto"],["tpl-button","","color","accent","buttonType","plain","size","small","width","auto",3,"click"],[1,"deadline"],[1,"card-error"],["name","alert-diamond"],[1,"pay-description"],["tpl-button","","icon","arrow-right",1,"pay-button",3,"click"]],template:function(o,c){o&1&&(a(0,"tpl-info-list")(1,"tpl-info-list-item")(2,"div",0),s(3,"\u304A\u652F\u6255\u3044\u65B9\u6CD5"),r(),a(4,"div",1),d(5,gi,4,2,"div",2)(6,hi,2,1,"div",3),r()()(),d(7,bi,4,2,"div",4)),o&2&&(l(5),p(c.entry.paymentMethod.id==="kj_credit_card_v1"&&!c.isPaymentExpired&&!c.isHideCardInfoStatus?5:6),l(2),p(c.unpaid?7:-1))},dependencies:[x,L,Oe,Nt,Ne,Ue,T],styles:["[_nghost-%COMP%]{display:block}tpl-info-list-item[_ngcontent-%COMP%]{--content-padding: 12px 8px}.card[_ngcontent-%COMP%]{align-items:center;display:flex;gap:8px 4px;justify-content:space-between}.card[_ngcontent-%COMP%] > button[tpl-button][_ngcontent-%COMP%]{padding:.5em .25em}.card-error[_ngcontent-%COMP%]{align-items:center;color:var(--tpl-color-attention);display:flex;font-size:1.4rem;font-weight:700;gap:8px;margin:8px 0}.card-error[_ngcontent-%COMP%] > tbx-icon[_ngcontent-%COMP%]{font-size:18px}.pay[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);border:1px solid var(--tpl-color-border);margin-top:16px;padding:16px}.pay-description[_ngcontent-%COMP%]{font-size:1.4rem;line-height:175%}.pay-button[_ngcontent-%COMP%]{display:block;margin:16px auto 0}.payment-method-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;margin:8px}.deadline[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:500;margin-top:8px;text-align:center}"],changeDetection:0});let e=t;return e})();var mn=(()=>{let t=class t{constructor(){this.http=C(le)}createRefund(i){return this.http.post(`v1/private/entries/choices/${i}/refunds`,{})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var dn=(()=>{let t=class t{constructor(){this.refundApi=C(mn)}createRefund(i){let o=this.refundApi.createRefund(i).pipe(q(c=>J(c)),K(c=>Q(Y(new Z("\u8FD4\u91D1\u30EA\u30AF\u30A8\u30B9\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F",{originalErrorResponse:c})))));return O(o)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var fn=(()=>{let t=class t{constructor(){this.alertService=C(ne),this.loaderService=C(pe),this.refundService=C(dn)}createRefund(i){return w(this,null,function*(){let o=window.open("","_blank");o&&o.document.write(this.getLoadingHtml());let c=this.loaderService.showLoader({message:"\u8AAD\u307F\u8FBC\u307F\u4E2D..."}),_=yield this.refundService.createRefund(i);if(c.close(),_.isFailure())return o&&o.close(),yield this.alertService.showErrorAlertFromResponse(_.error.originalErrorResponse,_.error.message),null;let R=_.value.entity.instructionUrl;return o?o.location=R:location.href=R,!0})}getLoadingHtml(){return`<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>\u8AAD\u307F\u8FBC\u307F\u4E2D...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body style="margin-top: 60px; font-family: ui-sans-serif,system-ui; text-align: center">
  <h1 style=" font-size: 22px">\u8AAD\u307F\u8FBC\u307F\u4E2D...</h1>
  <p style="font-size: 16px">\u305D\u306E\u307E\u307E\u3057\u3070\u3089\u304F\u304A\u5F85\u3061\u304F\u3060\u3055\u3044</p>
</body>
</html>
`}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Si(e,t){e&1&&s(0," \u516C\u6F14\u4E2D\u6B62\u306B\u3088\u308B\u8FD4\u91D1 ")}function Pi(e,t){e&1&&s(0," \u30EA\u30BB\u30FC\u30EB\u6210\u7ACB\u306B\u3088\u308B\u8FD4\u91D1 ")}function Fi(e,t){}function Mi(e,t){if(e&1&&(a(0,"div",5)(1,"div",4),s(2,"\u6CE8\u610F\u4E8B\u9805"),r(),f(3,"tbx-wysiwyg-body",6),r()),e&2){let n=u();l(3),m("body",n)}}function Di(e,t){if(e&1&&(d(0,Mi,4,1,"div",5),h(1,"isBodyPresent")),e&2){let n=t;p(n&&j(1,1,n)?0:-1)}}var Cn=(()=>{let t=class t{constructor(){this.choice=ie.required()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-refund-act-info"]],inputs:{choice:[1,"choice"]},standalone:!0,features:[g],decls:18,vars:12,consts:[[1,"refund-act-info"],[1,"section","act"],[3,"act"],[1,"section","period"],[1,"title"],[1,"section"],[3,"body"]],template:function(o,c){if(o&1&&(a(0,"div",0)(1,"div",1),f(2,"tpl-act-info",2),r(),a(3,"div",3)(4,"div",4),s(5,"\u8FD4\u91D1\u671F\u9593"),r(),a(6,"div"),s(7),h(8,"date"),h(9,"date"),r()(),a(10,"div",5)(11,"div",4),s(12,"\u8FD4\u91D1\u7A2E\u5225"),r(),a(13,"div"),d(14,Si,1,0)(15,Pi,1,0)(16,Fi,0,0),r()(),d(17,Di,2,3),r()),o&2){let _,R;l(2),m("act",c.choice().act),l(5),V(" ",S(8,6,c.choice().refundablePeriodStartsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," \u301C ",S(9,9,c.choice().refundablePeriodEndsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," "),l(7),p((_=c.choice().refundableUnit)==="choice"?14:_==="resale_instances"?15:-1),l(2),p(c.choice().refundableUnit==="resale_instances"?16:-1),l(),p((R=c.choice().act.refundAttentionBody)?17:-1,R)}},dependencies:[x,L,Je,ue,We],styles:[".refund-act-info[_ngcontent-%COMP%]{background-color:var(--tpl-color-form-background);margin-bottom:24px}.section[_ngcontent-%COMP%]{padding:12px}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{border-top:1px solid var(--tpl-color-border)}.title[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:700;margin-bottom:4px}"],changeDetection:0});let e=t;return e})();var Ai=(e,t)=>t.id;function Bi(e,t){e&1&&s(0," \u8FD4\u91D1\u5B8C\u4E86 ")}function wi(e,t){e&1&&(s(0," \u8FD4\u91D1\u5931\u6557 "),a(1,"div",5),s(2,"\u3082\u3046\u4E00\u5EA6\u3001\u8FD4\u91D1\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044"),r())}function ki(e,t){e&1&&s(0," \u8FD4\u91D1\u53D7\u4ED8\u6E08\u307F ")}function Ri(e,t){e&1&&s(0," \u9280\u884C\u632F\u8FBC ")}function Ii(e,t){e&1&&s(0," \u30BB\u30D6\u30F3\u9280\u884CATM\u53D7\u53D6 ")}function Ti(e,t){if(e&1&&(a(0,"tpl-info-list-item")(1,"div",3),s(2,"\u63D0\u643A\u5148\u30B3\u30FC\u30C9"),r(),a(3,"div",6),s(4),r()(),a(5,"tpl-info-list-item")(6,"div",3),s(7,"\u304A\u5BA2\u69D8\u756A\u53F7"),r(),a(8,"div",6),s(9),r()(),a(10,"tpl-info-list-item")(11,"div",3),s(12,"\u78BA\u8A8D\u756A\u53F7"),r(),a(13,"div",6),s(14),r()(),a(15,"tpl-info-list-item")(16,"div",3),s(17,"\u6709\u52B9\u671F\u9650"),r(),a(18,"div",4),s(19),r()()),e&2){let n=u(3).$implicit;l(4),v(n.entity.sevenAtmPartnerCode),l(5),V(" ",n.entity.sevenAtmCustomerNumber==null?null:n.entity.sevenAtmCustomerNumber.slice(0,3)," ",n.entity.sevenAtmCustomerNumber==null?null:n.entity.sevenAtmCustomerNumber.slice(3)," "),l(5),v(n.entity.sevenAtmConfirmationNumber),l(5),A("\u767B\u9332\u6642\u3088\u308A",n.entity.sevenAtmExpiryDays,"\u65E5\u4EE5\u5185\u306B\u53D7\u53D6\u3092\u5B8C\u4E86\u3057\u3066\u304F\u3060\u3055\u3044")}}function Oi(e,t){if(e&1&&d(0,Ti,20,5),e&2){let n=u(2).$implicit;p(n.entity.receiptMethod==="sevenatm"?0:-1)}}function Li(e,t){if(e&1&&(a(0,"tpl-info-list-item")(1,"div",3),s(2,"\u8FD4\u91D1\u30B9\u30C6\u30FC\u30BF\u30B9"),r(),a(3,"div",4),d(4,Bi,1,0)(5,wi,3,0,"div",5)(6,ki,1,0),r()(),a(7,"tpl-info-list-item")(8,"div",3),s(9,"\u8FD4\u91D1\u65B9\u6CD5"),r(),a(10,"div",4),d(11,Ri,1,0)(12,Ii,1,0),r()(),d(13,Oi,1,1)),e&2){let n,i=u().$implicit;l(4),p(i.entity.remittanceProcessed?4:i.entity.remittanceFailed?5:i.entity.receiptInfoRegistered?6:-1),l(7),p((n=i.entity.receiptMethod)==="bank"?11:n==="sevenatm"?12:-1),l(2),p(!i.entity.remittanceFailed&&!i.entity.remittanceProcessed?13:-1)}}function $i(e,t){if(e&1&&(a(0,"tpl-info-list")(1,"tpl-info-list-item")(2,"div",3),s(3,"\u8FD4\u91D1\u91D1\u984D"),r(),a(4,"div",4),s(5),h(6,"customCurrency"),r()(),d(7,Li,14,3),r()),e&2){let n=t.$implicit;l(5),A(" ",j(6,2,n.amount)," "),l(2),p(n.entity&&n.entity.receiptInfoRegistered?7:-1)}}function qi(e,t){if(e&1&&(a(0,"div",7)(1,"p",10),s(2,"\u30EA\u30F3\u30AF\u5148\u3067\u4EE5\u4E0B\u306E6\u6841\u306E\u30E6\u30FC\u30B6\u30FC\u756A\u53F7\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"),r(),f(3,"tpl-copyable-content",11),r()),e&2){let n=u(2);l(3),m("content",n.code())}}function zi(e,t){e&1&&(a(0,"div",9),s(1,"\u8FD4\u91D1\u671F\u9593\u524D\u3067\u3059"),r())}function Hi(e,t){e&1&&(a(0,"div",9),s(1,"\u8FD4\u91D1\u671F\u9593\u304C\u7D42\u4E86\u3057\u307E\u3057\u305F"),r())}function Vi(e,t){e&1&&(a(0,"div",9),s(1,"\u5916\u90E8\u30B5\u30A4\u30C8\u3078\u9077\u79FB\u3057\u307E\u3059"),r())}function ji(e,t){if(e&1){let n=B();d(0,qi,4,1,"div",7),a(1,"div",2)(2,"button",8),P("click",function(){M(n);let o=u();return D(o.requestRefund())}),s(3," \u8FD4\u91D1\u30EA\u30AF\u30A8\u30B9\u30C8 "),r(),d(4,zi,2,0,"div",9)(5,Hi,2,0,"div",9)(6,Vi,2,0,"div",9),r()}if(e&2){let n=u();p(n.refundPeriodStatus()==="between"?0:-1),l(2),m("disabled",n.refundPeriodStatus()!=="between"),l(2),p(n.refundPeriodStatus()==="before"?4:n.refundPeriodStatus()==="after"?5:n.refundPeriodStatus()==="between"?6:-1)}}var _n=(()=>{let t=class t{constructor(){this.choice=ie.required(),this.entry=ie.required(),this.code=I(()=>this.entry().entryNumber.slice(-6)),this.refundPeriodStatus=I(()=>X(this.choice().refundablePeriodStartsAt,this.choice().refundablePeriodEndsAt)),this.shouldRefundRequest=I(()=>this.choice().refunds.some(i=>!i.entity||!i.entity.receiptInfoRegistered||i.entity.remittanceFailed)),this.period=I(()=>this.choice()),this.refundUsecase=C(fn)}requestRefund(){this.refundUsecase.createRefund(this.choice().id)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-refund-info"]],inputs:{choice:[1,"choice"],entry:[1,"entry"]},standalone:!0,features:[g],decls:5,vars:2,consts:[[1,"info"],[3,"choice"],[1,"action"],["slot","header"],["slot","content"],[1,"error-message"],["slot","content",1,"info-number"],[1,"note"],["tpl-button","","color","accent","icon","external-link",3,"click","disabled"],[1,"action-note"],[1,"text"],[1,"code",3,"content"]],template:function(o,c){o&1&&(a(0,"div",0),f(1,"tpl-refund-act-info",1),r(),E(2,$i,8,4,"tpl-info-list",null,Ai),d(4,ji,7,3,"div",2)),o&2&&(l(),m("choice",c.choice()),l(),b(c.choice().refunds),l(2),p(c.shouldRefundRequest()?4:-1))},dependencies:[x,T,Cn,Rt,Ne,Ue,qt],styles:[".note[_ngcontent-%COMP%]{background:var(--tpl-color-form-background);margin:24px auto 0;max-width:350px;padding:12px}.note[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:8px}.note[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{--font-size: 2rem;--font-weight: 700;display:block;margin:0 2px}tpl-info-list[_ngcontent-%COMP%]{display:block}tpl-info-list[_ngcontent-%COMP%] + tpl-info-list[_ngcontent-%COMP%]{margin-top:24px}.info-number[_ngcontent-%COMP%]{font-size:1.8rem;letter-spacing:.01em}.error-message[_ngcontent-%COMP%]{color:var(--tpl-color-attention);font-size:1.3rem;font-weight:500;margin-top:8px}.action[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center;margin-top:24px}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--icon-font-size: 1.3rem}.action[_ngcontent-%COMP%]   .action-note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;margin-top:8px}"],changeDetection:0});let e=t;return e})();var Ui=(e,t)=>t.id,yn=e=>({rank:e});function Ni(e,t){if(e&1&&(a(0,"div",3),s(1),h(2,"ticketLocale"),h(3,"ticketLocale"),r()),e&2){let n=u(2).$index,i=u();l(),A(" ",i.entry().reception.choicesUnranked?S(2,1,"shared.entry.unrankedChoiceLabel",z(7,yn,n+1)):S(3,4,"shared.entry.rankedChoiceLabel",z(9,yn,n+1))," ")}}function Wi(e,t){if(e&1&&(a(0,"div",2),d(1,Ni,4,11,"div",3),f(2,"tpl-refund-info",4),r()),e&2){let n=u().$implicit,i=u();l(),p(i.isMultipleResalableChoices()?1:-1),l(),m("entry",i.entry())("choice",n)}}function Qi(e,t){if(e&1&&d(0,Wi,3,3,"div",2),e&2){let n=t.$implicit;p(n.refundable?0:-1)}}var gn=(()=>{let t=class t{constructor(){this.entry=ie.required(),this.choices=I(()=>this.entry().choices),this.targetChoices=I(()=>this.choices().filter(i=>i.refundable)),this.isMultipleResalableChoices=I(()=>this.targetChoices().length>1)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-entry-refund-section"]],inputs:{entry:[1,"entry"]},standalone:!0,features:[g],decls:4,vars:0,consts:[["title","\u8FD4\u91D1\u60C5\u5831"],[1,"refund-content"],[1,"choice"],[1,"choice-rank"],[3,"entry","choice"]],template:function(o,c){o&1&&(f(0,"tpl-section-header",0),a(1,"div",1),E(2,Qi,1,1,null,null,Ui),r()),o&2&&(l(2),b(c.choices()))},dependencies:[$,_n,Ce],styles:["[_nghost-%COMP%]{display:block}.refund-content[_ngcontent-%COMP%]{margin-top:16px;padding-bottom:16px}.choice[_ngcontent-%COMP%] + .choice[_ngcontent-%COMP%]{border-top:1px solid var(--tpl-color-border);margin-top:48px;padding-top:48px}.choice-rank[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500;margin-bottom:8px}"],changeDetection:0});let e=t;return e})();var hn=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-act-info"]],inputs:{choice:"choice"},standalone:!0,features:[g],decls:10,vars:9,consts:[[1,"resale-act-info"],[1,"act"],[3,"act"],[1,"period"],[1,"title"]],template:function(o,c){o&1&&(a(0,"div",0)(1,"div",1),f(2,"tpl-act-info",2),r(),a(3,"div",3)(4,"div",4),s(5,"\u30EA\u30BB\u30FC\u30EB\u671F\u9593"),r(),a(6,"div"),s(7),h(8,"date"),h(9,"date"),r()()()),o&2&&(l(2),m("act",c.choice.act),l(5),V(" ",S(8,3,c.choice.act.resalePeriodStartsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," \u301C ",S(9,6,c.choice.act.resalePeriodEndsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," "))},dependencies:[x,L,Je],styles:[".resale-act-info[_ngcontent-%COMP%]{background-color:var(--tpl-color-form-background);margin-bottom:24px}.act[_ngcontent-%COMP%]{border-bottom:1px solid var(--tpl-color-border);padding:12px}.period[_ngcontent-%COMP%]{padding:12px}.title[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:700;margin-bottom:4px}"],changeDetection:0});let e=t;return e})();function xn(e,t){let n=te(e.resaleListingInstances,i=>i.seatPlan.id).reduce((i,[o,c])=>(i[o]={length:c.length,companions:c.map(_=>_.listingEntryCompanion)},i),{});return e.seatPlanChoices.flatMap(i=>t?Array.from({length:i.quantity}).map((o,c)=>({id:`${i.seatPlan.id}_${c+1}`,act:e.act,seat:e.seat,seatPlan:i.seatPlan,companion:i.companions[c]})).map(o=>re(W({},o),{disabled:o.companion?.resaleListable===!1,reason:o.companion?.resaleListable===!1?"not_resale_listable":void 0})).filter(o=>!n[o.seatPlan.id]?.companions?.some(c=>o.companion?.id===c?.id)):Array.from({length:i.quantity-(n[i.seatPlan.id]?.length??0)}).map((o,c)=>({id:`${i.seatPlan.id}_${c+1}`,act:e.act,seat:e.seat,seatPlan:i.seatPlan,disabled:i.resalableQuantity<c+1,reason:i.resalableQuantity<c+1?"not_resale_listable":void 0})))}function vn(e,t){return e.resaleListingInstances.map(n=>{let i=(n.locked||n.fixed)??!1;return W(re(W({id:n.id,act:e.act,seat:e.seat,seatPlan:n.seatPlan},t?{companion:n.listingEntryCompanion??void 0}:{}),{disabled:i}),i?{reason:n.fixed?"fixed":n.locked?"locked":void 0}:{})})}var En=(()=>{let t=class t{constructor(){this.baseUrl="v1/private/entries/choices",this.http=C(le)}previewResale(i,o){return this.http.post(`${this.baseUrl}/${i}/resale_listing_instances/estimate`,{choice:{seatPlanChoicesAttributes:o}})}createResale(i,o){return this.http.post(`${this.baseUrl}/${i}/resale_listing_instances`,{choice:{seatPlanChoicesAttributes:o}})}cancelResale(i,o){return this.http.delete(`${this.baseUrl}/${i}/resale_listing_instances`,{body:{choice:{resale_listing_instance_ids:o}}})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var bn=(()=>{let t=class t{constructor(){this.resaleApi=C(En)}previewResale(i,o){let c=this.resaleApi.previewResale(i,o).pipe(q(_=>J(_)),K(_=>Q(Y(new Z("\u30EA\u30BB\u30FC\u30EB\u306E\u78BA\u8A8D\u306B\u5931\u6557\u3057\u307E\u3057\u305F",{originalErrorResponse:_})))));return O(c)}createResale(i,o){let c=this.resaleApi.createResale(i,o).pipe(q(_=>J(_)),K(_=>Q(Y(new Z("\u30EA\u30BB\u30FC\u30EB\u7533\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F",{originalErrorResponse:_})))));return O(c)}cancelResale(i,o){let c=this.resaleApi.cancelResale(i,o).pipe(q(_=>J(_)),K(_=>Q(Y(new Z("\u51FA\u54C1\u53D6\u308A\u6D88\u3057\u306B\u5931\u6557\u3057\u307E\u3057\u305F",{originalErrorResponse:_})))));return O(c)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var tt=(()=>{let t=class t{constructor(){this.alertService=C(ne),this.loaderService=C(pe),this.toastService=C(je),this.resaleService=C(bn)}previewResale(i,o){return w(this,null,function*(){let c=this.loaderService.showLoader({message:"\u8AAD\u307F\u8FBC\u307F\u4E2D..."}),_=yield this.resaleService.previewResale(i,o);return c.close(),_.isFailure()?(yield this.alertService.showErrorAlertFromResponse(_.error.originalErrorResponse,_.error.message),null):_.value})}createResale(i,o){return w(this,null,function*(){let c=this.loaderService.showLoader({message:"\u8AAD\u307F\u8FBC\u307F\u4E2D..."}),_=yield this.resaleService.createResale(i,o);return c.close(),_.isFailure()?(yield this.alertService.showErrorAlertFromResponse(_.error.originalErrorResponse,_.error.message),null):(this.toastService.open({message:"\u30EA\u30BB\u30FC\u30EB\u3078\u306E\u51FA\u54C1\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F",duration:3e3}),_.value)})}cancelResale(i,o){return w(this,null,function*(){let c=this.loaderService.showLoader({message:"\u8AAD\u307F\u8FBC\u307F\u4E2D..."}),_=yield this.resaleService.cancelResale(i,o);return c.close(),_.isFailure()?(yield this.alertService.showErrorAlertFromResponse(_.error.originalErrorResponse,_.error.message),null):(this.toastService.open({message:`${_.value.length}\u4EF6\u306E\u51FA\u54C1\u3092\u53D6\u308A\u6D88\u3057\u307E\u3057\u305F`,duration:3e3}),_.value)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ki(e,t){if(e&1&&(a(0,"div",14),s(1),r()),e&2){let n=u();l(),v(n.companion.name)}}var nt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-ticket-info"]],inputs:{act:"act",seat:"seat",seatPlan:"seatPlan",companion:"companion"},standalone:!0,features:[g],decls:29,vars:21,consts:[[1,"info"],[1,"info-date"],[1,"info-date-inner"],[1,"info-date-year"],[1,"divider"],[1,"info-date-month"],[1,"info-date-day"],[1,"info-day"],[1,"info-venue"],[1,"info-time",3,"act"],[1,"detail"],[1,"seat"],[1,"seat-name"],[1,"plan-name"],[1,"companion"]],template:function(o,c){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4),h(5,"date"),r(),a(6,"div",4),s(7,"/"),r(),a(8,"div",5),s(9),h(10,"date"),r(),a(11,"div",4),s(12,"/"),r(),a(13,"div",6),s(14),h(15,"date"),r()(),a(16,"div",7),s(17),h(18,"dateWithHoliday"),r()(),a(19,"div",8),s(20),r(),f(21,"tpl-reception-act-time",9),r(),a(22,"div",10)(23,"div",11)(24,"span",12),s(25),r(),a(26,"span",13),s(27),r()(),d(28,Ki,2,1,"div",14),r()),o&2&&(l(4),v(S(5,9,c.act.performanceDate,"yyyy")),l(5),v(S(10,12,c.act.performanceDate,"MM")),l(5),v(S(15,15,c.act.performanceDate,"dd")),l(3),v(S(18,18,c.act.performanceDate,"(E)")),l(3),v(c.act.venue),l(),m("act",c.act),l(4),v(c.seat.name),l(2),v(c.seatPlan.name),l(),p(c.companion?28:-1))},dependencies:[x,L,Ge,Ft],styles:[".info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.info-date[_ngcontent-%COMP%]{align-items:baseline;display:flex}.info-date-inner[_ngcontent-%COMP%]{align-items:baseline;display:flex;font-size:1.5rem}.info-date-inner[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 1px}.info-day[_ngcontent-%COMP%]{font-size:1.2rem;margin-left:2px;margin-right:8px}.info-venue[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.info-time[_ngcontent-%COMP%]{margin-top:4px}.detail[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px 16px;margin-top:8px}.seat[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);font-size:1.3rem;font-weight:700;padding:4px 16px}.seat[_ngcontent-%COMP%]   .plan-name[_ngcontent-%COMP%]{margin-left:4px}.seat[_ngcontent-%COMP%]   .plan-name[_ngcontent-%COMP%]:empty{display:none}.companion[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);font-size:1.3rem;font-weight:700;padding:4px 16px}"],changeDetection:0});let e=t;return e})();function Gi(e,t){e&1&&s(0," \u53D6\u5F15\u304C\u78BA\u5B9A\u3057\u3066\u3044\u308B\u305F\u3081\u3001\u51FA\u54C1\u53D6\u308A\u6D88\u3057\u3067\u304D\u307E\u305B\u3093 ")}function Ji(e,t){e&1&&s(0," \u624B\u7D9A\u304D\u4E2D\u306E\u305F\u3081\u3001\u51FA\u54C1\u53D6\u308A\u6D88\u3057\u3067\u304D\u307E\u305B\u3093 ")}function Yi(e,t){e&1&&s(0," \u5206\u914D\u4E2D\u304B\u5206\u914D\u6E08\u307F\u306E\u305F\u3081\u3001\u51FA\u54C1\u3067\u304D\u307E\u305B\u3093 ")}function Zi(e,t){if(e&1&&(a(0,"div",1),d(1,Gi,1,0)(2,Ji,1,0)(3,Yi,1,0),r()),e&2){let n,i=u();l(),p((n=i.choice.reason)==="fixed"?1:n==="locked"?2:n==="not_resale_listable"?3:-1)}}var he=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-ticket-info-with-error"]],inputs:{choice:"choice"},standalone:!0,features:[g],decls:2,vars:5,consts:[[3,"act","seat","seatPlan","companion"],[1,"reason"]],template:function(o,c){o&1&&(f(0,"tpl-resale-ticket-info",0),d(1,Zi,4,1,"div",1)),o&2&&(m("act",c.choice.act)("seat",c.choice.seat)("seatPlan",c.choice.seatPlan)("companion",c.choice.companion),l(),p(c.choice.disabled?1:-1))},dependencies:[x,nt],styles:[".reason[_ngcontent-%COMP%]{color:var(--tpl-color-attention);font-size:1.6rem;font-weight:700;margin-top:8px}"],changeDetection:0});let e=t;return e})();var Xi=(e,t)=>t.id;function eo(e,t){if(e&1&&(a(0,"tpl-radio-checkbox-button",1),f(1,"tpl-resale-ticket-info-with-error",2),r()),e&2){let n=t.$implicit,i=u();m("value",n)("compareFn",i.compare)("disabled",n.disabled),l(),m("choice",n)}}var it=(()=>{let t=class t{compare(i,o){return i.id===o.id}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-ticket-selector"]],inputs:{choices:"choices",form:"form"},standalone:!0,features:[g],decls:3,vars:1,consts:[["horizontalPosition","left","verticalPosition","top",3,"formControl"],[3,"value","compareFn","disabled"],[3,"choice"]],template:function(o,c){o&1&&(a(0,"tpl-radio-checkbox-group",0),E(1,eo,2,4,"tpl-radio-checkbox-button",1,Xi),r()),o&2&&(m("formControl",c.form),l(),b(c.choices))},dependencies:[x,At,Mt,Bt,Dt,Tt,Ot,he],changeDetection:0});let e=t;return e})();function no(e,t){e&1&&(a(0,"div",6),s(1,"\u51FA\u54C1\u306E\u53D6\u308A\u6D88\u3057\u304C\u3067\u304D\u307E\u305B\u3093"),r())}function io(e,t){if(e&1&&f(0,"tpl-resale-ticket-info-with-error",8),e&2){let n=t.$implicit;m("choice",n)}}function oo(e,t){if(e&1&&(f(0,"tpl-section-header",4),a(1,"p",5),s(2,"\u4EE5\u4E0B\u306E\u30C1\u30B1\u30C3\u30C8\u306E\u51FA\u54C1\u3092\u3059\u3079\u3066\u53D6\u308A\u6D88\u3057\u307E\u3059"),r(),d(3,no,2,0,"div",6),a(4,"div",7),E(5,io,1,1,"tpl-resale-ticket-info-with-error",8,G),r()),e&2){let n=u();l(3),p(n.disabledALlChoices?3:-1),l(2),b(n.choices)}}function ro(e,t){e&1&&(a(0,"div",6),s(1,"\u51FA\u54C1\u53D6\u308A\u6D88\u3057\u53EF\u80FD\u306A\u30C1\u30B1\u30C3\u30C8\u304C\u3042\u308A\u307E\u305B\u3093"),r())}function ao(e,t){if(e&1&&(f(0,"tpl-section-header",9),d(1,ro,2,0,"div",6),a(2,"div",7),f(3,"tpl-resale-ticket-selector",10),r()),e&2){let n=u();l(),p(n.disabledALlChoices?1:-1),l(2),m("choices",n.choices)("form",n.form)}}var Sn=(()=>{let t=class t{constructor(){this.form=new me([],{nonNullable:!0,validators:[$e.required]}),this.dialogData=C(Te),this.dialogRef=C(Ie),this.resaleUsecaseService=C(tt)}get resaleAllListingRequired(){return this.choices[0]?.seat?.resaleAllListingRequired}get disabledALlChoices(){return this.choices.every(i=>i.disabled)}ngOnInit(){this.choices=vn(this.dialogData.choice,this.dialogData.preCompanionRequired),this.resaleAllListingRequired&&this.form.setValue(this.choices)}dismiss(){this.dialogRef.close()}submit(){return w(this,null,function*(){let i=this.form.value;i&&(yield this.resaleUsecaseService.cancelResale(this.dialogData.choice.id,i.map(c=>c.id)))&&this.dialogRef.close({changed:!0})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-cancel-modal"]],standalone:!0,features:[g],decls:11,vars:2,consts:[[3,"close"],["slot","end",1,"actions"],["tpl-button","","color","basic-light","buttonType","stroked","size","small","width","auto",3,"click"],["tpl-button","","color","accent","size","small","width","auto",3,"click","disabled"],["title","\u51FA\u54C1\u3092\u53D6\u308A\u6D88\u3059\u30C1\u30B1\u30C3\u30C8","type","accent"],[1,"note"],[1,"error"],[1,"body"],[1,"choice",3,"choice"],["title","\u51FA\u54C1\u3092\u53D6\u308A\u6D88\u3059\u30C1\u30B1\u30C3\u30C8\u306E\u9078\u629E","type","accent"],[3,"choices","form"]],template:function(o,c){o&1&&(a(0,"tpl-modal",0),P("close",function(){return c.dismiss()}),a(1,"tpl-modal-header"),s(2,"\u51FA\u54C1\u53D6\u308A\u6D88\u3057"),r(),d(3,oo,7,1)(4,ao,4,3),a(5,"tpl-modal-footer")(6,"div",1)(7,"button",2),P("click",function(){return c.dismiss()}),s(8," \u30AD\u30E3\u30F3\u30BB\u30EB "),r(),a(9,"button",3),P("click",function(){return c.submit()}),s(10," \u6C7A\u5B9A "),r()()()()),o&2&&(l(3),p(c.resaleAllListingRequired?3:4),l(6),m("disabled",c.form.invalid))},dependencies:[x,T,de,qe,ze,$,it,he],styles:[".body[_ngcontent-%COMP%]{margin-top:16px;padding-bottom:24px}.actions[_ngcontent-%COMP%]{align-items:stretch;display:flex;gap:12px}.choice[_ngcontent-%COMP%]{background-color:var(--tpl-color-item-background);border:1px solid var(--tpl-color-border);display:block;padding:12px 16px}.choice[_ngcontent-%COMP%] + .choice[_ngcontent-%COMP%]{margin-top:8px}.note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500;margin-top:16px}.error[_ngcontent-%COMP%]{color:var(--tpl-color-attention);font-size:1.4rem;font-weight:500;margin-top:16px}"],changeDetection:0});let e=t;return e})();function Pn(e,t){return te(e,n=>n.seatPlan.id).map(([n,i])=>W({id:n,quantity:i.length},t?{companionIds:i.map(o=>o.companion?.id).filter(o=>!!o)}:{}))}function co(e,t){e&1&&s(0," \u51FA\u54C1\u4E2D ")}function lo(e,t){e&1&&s(0," \u8CFC\u5165\u5074\u6C7A\u6E08\u5F85\u3061 ")}function so(e,t){e&1&&s(0," \u30EA\u30BB\u30FC\u30EB\u6210\u7ACB ")}function uo(e,t){e&1&&s(0," \u30EA\u30BB\u30FC\u30EB\u4E0D\u6210\u7ACB ")}function po(e,t){if(e&1&&(a(0,"div",1),d(1,co,1,0)(2,lo,1,0)(3,so,1,0)(4,uo,1,0),r()),e&2){let n,i=u(2);m("ngClass",i.status$()),l(),p((n=i.status$())==="listing"?1:n==="in_progress"?2:n==="complete"?3:n==="missed"?4:-1)}}function mo(e,t){if(e&1&&(f(0,"tpl-resale-ticket-info",0),d(1,po,5,2,"div",1)),e&2){let n=t;m("act",n.act)("seat",n.seat)("seatPlan",n.seatPlan)("companion",n.listingEntryCompanion),l(),p(n.id?1:-1)}}var xe=(()=>{let t=class t{constructor(){this.instance$=Ae(null),this.status$=I(()=>{let i=this.instance$();return i?i.fixed?"complete":i.locked?"in_progress":i.act.resaleFinalLotteryCompleted?"missed":"listing":"listing"})}set listingInstance(i){this.instance$.set(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-ticket-item"]],inputs:{listingInstance:"listingInstance"},standalone:!0,features:[g],decls:1,vars:1,consts:[[3,"act","seat","seatPlan","companion"],[1,"status",3,"ngClass"]],template:function(o,c){if(o&1&&d(0,mo,2,5),o&2){let _;p((_=c.instance$())?0:-1,_)}},dependencies:[x,ke,nt],styles:["[_nghost-%COMP%]{background-color:var(--tpl-color-item-background);border:1px solid var(--tpl-color-border);display:block;padding:12px;position:relative}.status[_ngcontent-%COMP%]{background-color:var(--tpl-color-primary);color:var(--tpl-color-primary-contrast);font-size:1.3rem;font-weight:700;padding:4px 12px;position:absolute;right:12px;top:12px}.status.in_progress[_ngcontent-%COMP%]{background-color:var(--tpl-color-text-light);color:var(--tpl-color-text-light-contrast)}.status.complete[_ngcontent-%COMP%]{background-color:var(--tpl-color-accent);color:var(--tpl-color-accent-contrast)}.status.missed[_ngcontent-%COMP%]{background-color:var(--tpl-color-disabled);color:var(--tpl-color-text)}"],changeDetection:0});let e=t;return e})();var Fn=(e,t)=>t.id;function fo(e,t){e&1&&(a(0,"div",4),s(1,"\u4E00\u90E8\u306E\u30C1\u30B1\u30C3\u30C8\u306B\u554F\u984C\u304C\u3042\u308B\u305F\u3081\u3001\u30EA\u30BB\u30FC\u30EB\u306B\u51FA\u54C1\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002"),r())}function Co(e,t){if(e&1&&(f(0,"tpl-section-header",2),a(1,"p",3),s(2," \u3059\u3079\u3066\u306E\u30C1\u30B1\u30C3\u30C8\u3092\u4E00\u629E\u3067\u51FA\u54C1\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002 "),f(3,"br"),s(4," \u5206\u914D\u4E2D\u306E\u51FA\u54C1\u306F\u3067\u304D\u307E\u305B\u3093\u3002 \u5206\u914D\u6E08\u307F\u306E\u5834\u5408\u306F\u540C\u884C\u8005\u69D8\u306B\u7533\u8FBC\u8005\u3078\u30C1\u30B1\u30C3\u30C8\u3092\u8FD4\u5374\u3057\u3066\u3044\u305F\u3060\u304F\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002 "),r(),d(5,fo,2,0,"div",4)),e&2){let n=u();l(5),p(n.hasErrorResaleAllListingRequired?5:-1)}}function _o(e,t){e&1&&(f(0,"tpl-section-header",5),a(1,"p",3),s(2," \u30EA\u30BB\u30FC\u30EB\u306B\u51FA\u54C1\u3059\u308B\u30C1\u30B1\u30C3\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002 "),f(3,"br"),s(4," \u5206\u914D\u4E2D\u306E\u51FA\u54C1\u306F\u3067\u304D\u307E\u305B\u3093\u3002 \u5206\u914D\u6E08\u307F\u306E\u5834\u5408\u306F\u540C\u884C\u8005\u69D8\u306B\u7533\u8FBC\u8005\u3078\u30C1\u30B1\u30C3\u30C8\u3092\u8FD4\u5374\u3057\u3066\u3044\u305F\u3060\u304F\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002 "),r())}function yo(e,t){if(e&1&&f(0,"tpl-resale-ticket-info-with-error",6),e&2){let n=t.$implicit;m("choice",n)}}function go(e,t){if(e&1&&E(0,yo,1,1,"tpl-resale-ticket-info-with-error",6,Fn),e&2){let n=u();b(n.choices)}}function ho(e,t){if(e&1&&f(0,"tpl-resale-ticket-selector",7),e&2){let n=u(2);m("choices",n.choices)("form",n.form)}}function xo(e,t){e&1&&(a(0,"p",8),s(1,"\u3059\u3079\u3066\u306E\u30C1\u30B1\u30C3\u30C8\u304C\u30EA\u30BB\u30FC\u30EB\u306B\u51FA\u54C1\u3055\u308C\u3066\u3044\u307E\u3059"),r())}function vo(e,t){if(e&1&&d(0,ho,1,2,"tpl-resale-ticket-selector",7)(1,xo,2,0,"p",8),e&2){let n=u();p(n.choices.length>0?0:1)}}function Eo(e,t){if(e&1&&f(0,"tpl-resale-ticket-item",11),e&2){let n=t.$implicit;m("listingInstance",n)}}function bo(e,t){if(e&1&&(a(0,"div",1)(1,"div",9),s(2,"\u4EE5\u4E0B\u306E\u30C1\u30B1\u30C3\u30C8\u306F\u3059\u3067\u306B\u51FA\u54C1\u3055\u308C\u3066\u3044\u307E\u3059"),r(),a(3,"div",10),E(4,Eo,1,1,"tpl-resale-ticket-item",11,Fn),r()()),e&2){let n=u();l(4),b(n.listingInstances)}}var Mn=(()=>{let t=class t{constructor(){this.listingInstances=[]}get resaleAllListingRequired(){return this.choices[0]?.seat?.resaleAllListingRequired}get hasErrorResaleAllListingRequired(){return this.resaleAllListingRequired&&this.form.value.length===0}ngOnInit(){this.resaleAllListingRequired&&this.choices.every(i=>!i.disabled)&&this.form.setValue(this.choices)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-choice"]],inputs:{choices:"choices",preCompanionRequired:"preCompanionRequired",listingInstances:"listingInstances",form:"form"},standalone:!0,features:[g],decls:6,vars:3,consts:[[1,"body"],[1,"listed"],["title","\u51FA\u54C1\u3059\u308B\u30C1\u30B1\u30C3\u30C8","type","accent"],[1,"note"],[1,"error"],["title","\u51FA\u54C1\u3059\u308B\u30C1\u30B1\u30C3\u30C8\u306E\u9078\u629E","type","accent"],[1,"choice",3,"choice"],[3,"choices","form"],[1,"empty-message"],[1,"title"],[1,"tickets"],[3,"listingInstance"]],template:function(o,c){o&1&&(d(0,Co,6,1)(1,_o,5,0),a(2,"div",0),d(3,go,2,0)(4,vo,2,1),r(),d(5,bo,6,0,"div",1)),o&2&&(p(c.resaleAllListingRequired?0:1),l(3),p(c.resaleAllListingRequired?3:4),l(2),p(c.listingInstances.length>0?5:-1))},dependencies:[x,$,it,xe,he],styles:["[_nghost-%COMP%]{display:block;padding-bottom:32px}.note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500;margin-top:16px}.error[_ngcontent-%COMP%]{color:var(--tpl-color-attention);font-size:1.4rem;font-weight:500;margin-top:16px}.body[_ngcontent-%COMP%]{margin-top:16px}.choice[_ngcontent-%COMP%]{background-color:var(--tpl-color-item-background);border:1px solid var(--tpl-color-border);display:block;padding:12px 16px}.choice[_ngcontent-%COMP%] + .choice[_ngcontent-%COMP%]{margin-top:8px}.empty-message[_ngcontent-%COMP%]{background-color:#fff;font-size:1.5rem;font-weight:700;margin:32px;padding:32px;text-align:center}.listed[_ngcontent-%COMP%]{margin-top:32px;padding:16px}.listed[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500}.listed[_ngcontent-%COMP%]   .tickets[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px}"],changeDetection:0});let e=t;return e})();function So(e,t){if(e&1&&(a(0,"tpl-payment-list-item",1)(1,"div",3),s(2),r()()),e&2){let n=t.$implicit;m("amount",n.amount)("quantity",n.quantity)("unitAmount",n.unitAmount),l(2),A(" ",n.name," ")}}function Po(e,t){if(e&1&&(a(0,"tpl-payment-list-item",2)(1,"div",4),s(2),r()()),e&2){let n=t.$implicit;m("quantity",n.quantity)("amount",n.amount)("unitAmount",n.unitAmount),l(2),v(n.name)}}function Fo(e,t){if(e&1&&(a(0,"tpl-payment-list-item",2)(1,"div",4),s(2),r()()),e&2){let n=t.$implicit;m("quantity",n.quantity)("amount",n.amount)("unitAmount",n.unitAmount),l(2),v(n.name)}}var ot=(()=>{let t=class t{constructor(){this.showOnlyFixed=!1,this.instances$=Ae([]),this.ticketItems$=I(()=>{let i=this.instances$().filter(o=>!this.showOnlyFixed||o.fixed);return te(i,o=>o.seatPlan.id).map(([o,c])=>{let _=`${c[0].seat.name} ${c[0].seatPlan.name}`,R=c[0].seatPlan.price,N=c.length,ve=c.reduce((Ee,be)=>Ee+be.seatPlan.price,0);return{seatPlanId:o,name:_,unitAmount:R,quantity:N,amount:ve}})}),this.refundableFees$=I(()=>{let i=this.instances$().filter(o=>!this.showOnlyFixed||o.fixed);return te(i.flatMap(o=>o.refundableFees),"feeId").map(([o,c])=>{let _=c[0].name,R=c[0].amount,N=c.length,ve=c.reduce((Ee,be)=>Ee+be.amount,0);return{feeId:o,name:_,unitAmount:R,quantity:N,amount:ve}})}),this.listingFees$=I(()=>{let i=this.instances$().filter(o=>!this.showOnlyFixed||o.fixed);return te(i.flatMap(o=>o.listingFees),"listingFeeId").map(([o,c])=>{let _=c[0].name,R=c[0].amount*-1,N=c.length,ve=c.reduce((Ee,be)=>Ee+be.amount,0)*-1;return{feeId:o,name:_,unitAmount:R,quantity:N,amount:ve}})}),this.totalAmount$=I(()=>{let i=this.instances$().filter(R=>!this.showOnlyFixed||R.fixed),o=this.refundableFees$(),c=this.listingFees$();return i.map(R=>R.refundAmount).reduce((R,N)=>R+N,0)+[...o,...c].reduce((R,N)=>R+N.amount,0)})}set listingInstances(i){this.instances$.set(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-refund-summary"]],inputs:{listingInstances:"listingInstances",showOnlyFixed:"showOnlyFixed"},standalone:!0,features:[g],decls:7,vars:1,consts:[["summaryLabel","\u8FD4\u91D1\u5408\u8A08(\u7A0E\u8FBC)",3,"totalAmount"],[3,"amount","quantity","unitAmount"],[3,"quantity","amount","unitAmount"],[1,"ticket-label"],[1,"fee-label"]],template:function(o,c){o&1&&(a(0,"tpl-payment-list-summary",0),E(1,So,3,4,"tpl-payment-list-item",1,G),E(3,Po,3,4,"tpl-payment-list-item",2,G),E(5,Fo,3,4,"tpl-payment-list-item",2,G),r()),o&2&&(m("totalAmount",c.totalAmount$()),l(),b(c.ticketItems$()),l(2),b(c.refundableFees$()),l(2),b(c.listingFees$()))},dependencies:[x,Qe,Ke],styles:["[_nghost-%COMP%]{--summary-background: var(--background, var(--tpl-color-item-background))}tpl-payment-list-summary[_ngcontent-%COMP%]{--background: var(--summary-background)}tpl-payment-list-item[_ngcontent-%COMP%]{--background: var(--summary-background)}.ticket-label[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:500}.fee-label[_ngcontent-%COMP%]{font-size:1.4rem}"],changeDetection:0});let e=t;return e})();function Mo(e,t){if(e&1&&f(0,"tpl-resale-ticket-item",4),e&2){let n=t.$implicit;m("listingInstance",n)}}function Do(e,t){if(e&1&&f(0,"tpl-resale-ticket-item",4),e&2){let n=t.$implicit;m("listingInstance",n)}}function Ao(e,t){if(e&1&&(a(0,"div",5)(1,"div",11)(2,"p"),s(3,"\u4EE5\u4E0B\u306E\u30C1\u30B1\u30C3\u30C8\u306F\u3059\u3067\u306B\u51FA\u54C1\u3055\u308C\u3066\u3044\u307E\u3059"),r()(),a(4,"div",12),E(5,Do,1,1,"tpl-resale-ticket-item",4,G),r()()),e&2){let n=u();l(5),b(n.choice.resaleListingInstances)}}function Bo(e,t){if(e&1&&(a(0,"div",0),f(1,"tpl-section-header",13),a(2,"div",2)(3,"div",14),f(4,"tbx-wysiwyg-body",15),r()()()),e&2){let n=u();l(4),m("body",n.choice.act.resaleListingMainBody)}}var Dn=(()=>{let t=class t{constructor(){this.ready=new H,this.agreementForm=new me(!1,{nonNullable:!0}),this.destroyRef=C(ut)}get listingInstances(){return[...this.previewInstances,...this.choice.resaleListingInstances]}ngOnInit(){this.agreementForm.valueChanges.pipe(wt(this.destroyRef)).subscribe(i=>{this.ready.emit(i)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-confirm"]],inputs:{choice:"choice",previewInstances:"previewInstances"},outputs:{ready:"ready"},standalone:!0,features:[g],decls:20,vars:6,consts:[[1,"section"],["type","accent",3,"title"],[1,"content"],[1,"ticket"],[3,"listingInstance"],[1,"listed"],["title","\u8FD4\u91D1\u5185\u8A33","type","accent"],[3,"listingInstances"],[1,"note"],[1,"agreement"],[3,"form","hasAttentionBody"],[1,"title"],[1,"tickets"],["title","\u304A\u7533\u8FBC\u307F\u306B\u95A2\u3059\u308B\u6CE8\u610F\u4E8B\u9805","type","accent"],[1,"caution"],[3,"body"]],template:function(o,c){o&1&&(f(0,"tpl-entry-confirm-attention"),a(1,"div",0),f(2,"tpl-section-header",1),a(3,"div",2)(4,"div",3),E(5,Mo,1,1,"tpl-resale-ticket-item",4,G),r(),d(7,Ao,7,0,"div",5),r()(),a(8,"div",0),f(9,"tpl-section-header",6),a(10,"div",2),f(11,"tpl-resale-refund-summary",7),a(12,"div",8),s(13,"\u8868\u793A\u3055\u308C\u3044\u3066\u3044\u308B\u6599\u91D1\u306F\u3059\u3079\u3066\u306E\u30C1\u30B1\u30C3\u30C8\u306E\u53D6\u5F15\u304C\u5B8C\u4E86\u3057\u305F\u5834\u5408\u306E\u6599\u91D1\u3067\u3059"),r(),a(14,"div",8),s(15,"\u8FD4\u91D1\u306F\u516C\u6F14\u7D42\u4E86\u5F8C\u3092\u4E88\u5B9A\u3057\u3066\u304A\u308A\u307E\u3059\u3002"),r()()(),d(16,Bo,5,1,"div",0),a(17,"div",0)(18,"div",9),f(19,"tpl-agreement-button",10),r()()),o&2&&(l(2),m("title",c.choice.resaleListingInstances.length>0?"\u8FFD\u52A0\u51FA\u54C1\u30C1\u30B1\u30C3\u30C8":"\u51FA\u54C1\u30C1\u30B1\u30C3\u30C8"),l(3),b(c.previewInstances),l(2),p(c.choice.resaleListingInstances.length>0?7:-1),l(4),m("listingInstances",c.listingInstances),l(5),p(c.choice.act.resaleListingMainBody?16:-1),l(3),m("form",c.agreementForm)("hasAttentionBody",!0))},dependencies:[x,ue,Yt,$,xe,Jt,ot],styles:["[_nghost-%COMP%]{display:block;padding-bottom:32px}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{margin-top:32px}.content[_ngcontent-%COMP%]{margin-top:16px}.ticket[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.caution[_ngcontent-%COMP%]{background-color:var(--tpl-color-background);padding:16px}.agreement[_ngcontent-%COMP%]{margin:0 auto;max-width:450px}.listed[_ngcontent-%COMP%]{margin-top:32px;padding:16px 16px 0}.listed[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500}.listed[_ngcontent-%COMP%]   .tickets[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px}.note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.2rem;margin-top:8px}"],changeDetection:0});let e=t;return e})();function wo(e,t){e&1&&s(0," \u30EA\u30BB\u30FC\u30EB\u7533\u8FBC\u307F ")}function ko(e,t){e&1&&s(0," \u304A\u7533\u8FBC\u307F\u5185\u5BB9\u306E\u78BA\u8A8D ")}function Ro(e,t){if(e&1&&f(0,"tpl-resale-choice",1),e&2){let n=u();m("listingInstances",n.dialogData.choice.resaleListingInstances)("choices",n.resaleTickets)("preCompanionRequired",n.dialogData.preCompanionRequired)("form",n.form)}}function Io(e,t){if(e&1){let n=B();a(0,"tpl-resale-confirm",4),P("ready",function(o){M(n);let c=u(2);return D(c.ready=o)}),r()}if(e&2){let n=u(2);m("choice",n.dialogData.choice)("previewInstances",n.previewInstances)}}function To(e,t){if(e&1&&d(0,Io,1,2,"tpl-resale-confirm",3),e&2){let n=u();p(n.previewInstances?0:-1)}}function Oo(e,t){if(e&1){let n=B();a(0,"button",5),P("click",function(){M(n);let o=u();return D(o.dismiss())}),s(1," \u30AD\u30E3\u30F3\u30BB\u30EB "),r(),a(2,"button",6),P("click",function(){M(n);let o=u();return D(o.next())}),s(3," \u6B21\u3078 "),r()}if(e&2){let n=u();l(2),m("disabled",n.form.invalid)}}function Lo(e,t){if(e&1){let n=B();a(0,"button",5),P("click",function(){M(n);let o=u();return D(o.back())}),s(1," \u623B\u308B "),r(),a(2,"button",6),P("click",function(){M(n);let o=u();return D(o.resell())}),s(3," \u3053\u306E\u5185\u5BB9\u3067\u7533\u8FBC\u3080 "),r()}if(e&2){let n=u();l(2),m("disabled",!n.ready)}}var An=(()=>{let t=class t{constructor(){this.status="choice",this.ready=!1,this.form=new me([],{nonNullable:!0,validators:[$e.required]}),this.choices=[],this.dialogData=C(Te),this.dialogRef=C(Ie),this.cdRef=C(gt),this.alertService=C(ne),this.resaleUsecaseService=C(tt)}get resaleTickets(){return xn(this.dialogData.choice,this.dialogData.preCompanionRequired)}dismiss(){return w(this,null,function*(){(yield this.alertService.showConfirmation({message:"\u30EA\u30BB\u30FC\u30EB\u7533\u8FBC\u307F\u3092\u4E2D\u6B62\u3057\u307E\u3059\u304B\uFF1F",buttonText:"\u4E2D\u6B62\u3059\u308B",buttonColor:"attention",cancelButtonText:"\u7D9A\u884C\u3059\u308B"}))&&this.dialogRef.close({success:!1})})}next(){return w(this,null,function*(){let i=this.form.value;if(i.length===0)return;this.modal?.scrollToTop();let o=Pn(i,this.dialogData.preCompanionRequired);this.choices=o;let c=yield this.resaleUsecaseService.previewResale(this.dialogData.choice.id,o);c&&(this.previewInstances=c,this.status="confirm",this.cdRef.markForCheck())})}back(){this.status="choice",this.modal?.scrollToTop(),this.cdRef.markForCheck()}resell(){return w(this,null,function*(){(yield this.resaleUsecaseService.createResale(this.dialogData.choice.id,this.choices))&&this.dialogRef.close({success:!0})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-modal"]],viewQuery:function(o,c){if(o&1&&Ct(de,7),o&2){let _;_t(_=yt())&&(c.modal=_.first)}},standalone:!0,features:[g],decls:10,vars:3,consts:[[3,"close"],[3,"listingInstances","choices","preCompanionRequired","form"],["slot","end",1,"actions"],[3,"choice","previewInstances"],[3,"ready","choice","previewInstances"],["tpl-button","","color","basic-light","size","small","buttonType","stroked","width","auto",3,"click"],["tpl-button","","color","accent","size","small","width","auto",3,"click","disabled"]],template:function(o,c){o&1&&(a(0,"tpl-modal",0),P("close",function(){return c.dismiss()}),a(1,"tpl-modal-header"),d(2,wo,1,0)(3,ko,1,0),r(),d(4,Ro,1,4,"tpl-resale-choice",1)(5,To,1,1),a(6,"tpl-modal-footer")(7,"div",2),d(8,Oo,4,1)(9,Lo,4,1),r()()()),o&2&&(l(2),p(c.status==="choice"?2:c.status==="confirm"?3:-1),l(2),p(c.status==="choice"?4:c.status==="confirm"?5:-1),l(4),p(c.status==="choice"?8:c.status==="confirm"?9:-1))},dependencies:[x,T,de,qe,ze,Mn,Dn],styles:[".actions[_ngcontent-%COMP%]{align-items:stretch;display:flex;gap:12px}"],changeDetection:0});let e=t;return e})();var rt=(()=>{let t=class t{constructor(){this.dialog=C(xt)}openResaleListingModal(i,{preCompanionRequired:o}){return this.dialog.open(An,{maxWidth:"580px",width:"95%",disableClose:!0,data:{choice:i,preCompanionRequired:o}})}openResaleCancelModal(i,{preCompanionRequired:o}){return this.dialog.open(Sn,{maxWidth:"580px",width:"95%",disableClose:!0,data:{choice:i,preCompanionRequired:o}})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $o=(e,t)=>t.id,qo=e=>[e];function zo(e,t){if(e&1&&(a(0,"div",1),f(1,"tpl-resale-ticket-item",3),a(2,"div",4),f(3,"tpl-resale-refund-summary",5),r()()),e&2){let n=t.$implicit;l(),m("listingInstance",n),l(2),m("listingInstances",z(2,qo,n))}}function Ho(e,t){if(e&1&&(a(0,"div",2)(1,"div",6),s(2,"\u8FD4\u91D1\u78BA\u5B9A\u6E08\u307F\u306E\u5408\u8A08\u91D1\u984D\u5185\u8A33"),r(),f(3,"tpl-resale-refund-summary",7),a(4,"div",8),s(5,"\u8FD4\u91D1\u306F\u516C\u6F14\u7D42\u4E86\u5F8C\u3092\u4E88\u5B9A\u3057\u3066\u304A\u308A\u307E\u3059\u3002"),r()()),e&2){let n=u();l(3),m("listingInstances",n.choice.resaleListingInstances)("showOnlyFixed",!0)}}function Vo(e,t){if(e&1){let n=B();a(0,"button",13),P("click",function(){M(n);let o=u(2);return D(o.additionalResale())}),s(1," \u8FFD\u52A0\u51FA\u54C1\u3059\u308B "),r()}if(e&2){let n=u(2);m("disabled",n.choice.act.resaleLotteryInProgress)}}function jo(e,t){e&1&&(a(0,"div",12),s(1,"\u62BD\u9078\u4E2D\u306F\u64CD\u4F5C\u3067\u304D\u307E\u305B\u3093"),r())}function Uo(e,t){if(e&1){let n=B();a(0,"div",9)(1,"button",10),P("click",function(){M(n);let o=u();return D(o.cancelResale())}),s(2," \u51FA\u54C1\u53D6\u308A\u6D88\u3057 "),r(),d(3,Vo,2,1,"button",11),r(),d(4,jo,2,0,"div",12)}if(e&2){let n=u();l(),m("disabled",n.choice.act.resaleLotteryInProgress),l(2),p(n.choice.seat.resaleAllListingRequired?-1:3),l(),p(n.choice.act.resaleLotteryInProgress?4:-1)}}var Bn=(()=>{let t=class t{constructor(){this.changed=new H,this.resaleModalService=C(rt)}get resalePeriodStatus(){return X(this.choice.act.resalePeriodStartsAt,this.choice.act.resalePeriodEndsAt)}cancelResale(){return w(this,null,function*(){let i=this.resaleModalService.openResaleCancelModal(this.choice,{preCompanionRequired:this.preCompanionRequired});(yield O(i.closed))?.changed&&this.changed.emit(this.choice)})}additionalResale(){return w(this,null,function*(){let i=this.resaleModalService.openResaleListingModal(this.choice,{preCompanionRequired:this.preCompanionRequired,resaleListingInstances:this.choice.resaleListingInstances});(yield O(i.closed))?.success&&this.changed.emit(this.choice)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-info"]],inputs:{choice:"choice",preCompanionRequired:"preCompanionRequired"},outputs:{changed:"changed"},standalone:!0,features:[g],decls:5,vars:2,consts:[[1,"ticket-list"],[1,"ticket-detail"],[1,"refund"],[3,"listingInstance"],[1,"ticket-refund-summary"],[3,"listingInstances"],[1,"refund-title"],[3,"listingInstances","showOnlyFixed"],[1,"note"],[1,"actions"],["tpl-button","","color","basic-light","buttonType","stroked","icon","arrow-right","width","auto",3,"click","disabled"],["tpl-button","","color","accent","icon","arrow-right","width","auto",3,"disabled"],[1,"resale-note"],["tpl-button","","color","accent","icon","arrow-right","width","auto",3,"click","disabled"]],template:function(o,c){o&1&&(a(0,"div",0),E(1,zo,4,4,"div",1,$o),r(),d(3,Ho,6,2,"div",2)(4,Uo,5,3)),o&2&&(l(),b(c.choice.resaleListingInstances),l(2),p(c.choice.resaleListingInstances?3:-1),l(),p(!c.choice.act.resaleFinalLotteryCompleted&&c.resalePeriodStatus==="between"?4:-1))},dependencies:[x,T,xe,ot],styles:[".ticket-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.ticket-refund-summary[_ngcontent-%COMP%]{margin-top:16px;padding-left:16px}.refund[_ngcontent-%COMP%]{margin-top:16px}tpl-resale-refund-summary[_ngcontent-%COMP%]{--background: var(--tpl-color-form-background)}.refund-title[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:700;margin-bottom:8px}.refund-note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;margin-top:12px}.actions[_ngcontent-%COMP%]{align-items:stretch;display:flex;gap:12px;justify-content:center;margin-top:32px}.actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{max-width:180px;width:100%}.note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.2rem;margin-top:8px}"],changeDetection:0});let e=t;return e})();function No(e,t){e&1&&(a(0,"div",2),s(1,"\u30EA\u30BB\u30FC\u30EB\u671F\u9593\u524D\u3067\u3059"),r())}function Wo(e,t){e&1&&(a(0,"div",2),s(1,"\u30EA\u30BB\u30FC\u30EB\u671F\u9593\u304C\u7D42\u4E86\u3057\u307E\u3057\u305F"),r())}function Qo(e,t){e&1&&(a(0,"div",2),s(1,"\u62BD\u9078\u4E2D\u306F\u51FA\u54C1\u3067\u304D\u307E\u305B\u3093"),r())}function Ko(e,t){if(e&1){let n=B();a(0,"div",0)(1,"button",1),P("click",function(){M(n);let o=u(2);return D(o.openResaleModal(o.choice))}),s(2," \u30EA\u30BB\u30FC\u30EB\u306B\u51FA\u54C1\u3059\u308B "),r(),d(3,No,2,0,"div",2)(4,Wo,2,0,"div",2)(5,Qo,2,0,"div",2),r()}if(e&2){let n=u(2);l(),m("disabled",n.choice.act.resaleLotteryInProgress||n.resalePeriodStatus!=="between"),l(2),p(n.resalePeriodStatus==="before"?3:n.resalePeriodStatus==="after"?4:-1),l(2),p(n.choice.act.resaleLotteryInProgress?5:-1)}}function Go(e,t){if(e&1&&d(0,Ko,6,3,"div",0),e&2){let n=u();p(!n.choice.resaleListingInstances||n.choice.resaleListingInstances.length===0?0:-1)}}var wn=(()=>{let t=class t{constructor(){this.changed=new H,this.resaleModalService=C(rt)}get resalePeriodStatus(){return X(this.choice.act.resalePeriodStartsAt,this.choice.act.resalePeriodEndsAt)}get isEnableResale(){return this.choice.act.resalePeriodStartsAt&&this.choice.act.resalePeriodEndsAt&&this.choice.seat.resaleEnabled}openResaleModal(i){return w(this,null,function*(){let o=this.resaleModalService.openResaleListingModal(i,{preCompanionRequired:this.entry.reception.preCompanionsRequired});(yield O(o.closed))?.success&&this.changed.emit(i)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-resale-listing-entry"]],inputs:{entry:"entry",choice:"choice"},outputs:{changed:"changed"},standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"resale"],["tpl-button","","color","accent",3,"click","disabled"],[1,"resale-note"]],template:function(o,c){o&1&&d(0,Go,1,1),o&2&&p(c.entry.status==="won_paid"&&c.choice.won===!0&&c.isEnableResale?0:-1)},dependencies:[x,T],styles:[".resale[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.resale-note[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:13px;margin-top:8px}"],changeDetection:0});let e=t;return e})();var Jo=(e,t)=>t.id,kn=e=>({rank:e});function Yo(e,t){if(e&1&&(a(0,"div",3),s(1),h(2,"ticketLocale"),h(3,"ticketLocale"),r()),e&2){let n=u(2).$index,i=u();l(),A(" ",i.entry.reception.choicesUnranked?S(2,1,"shared.entry.unrankedChoiceLabel",z(7,kn,n+1)):S(3,4,"shared.entry.rankedChoiceLabel",z(9,kn,n+1))," ")}}function Zo(e,t){if(e&1){let n=B();a(0,"tpl-resale-info",7),P("changed",function(o){M(n);let c=u(3);return D(c.changed.emit(o))}),r()}if(e&2){let n=u(2).$implicit,i=u();m("choice",n)("preCompanionRequired",i.entry.reception.preCompanionsRequired)}}function Xo(e,t){if(e&1){let n=B();a(0,"tpl-resale-listing-entry",8),P("changed",function(o){M(n);let c=u(3);return D(c.changed.emit(o))}),r()}if(e&2){let n=u(2).$implicit,i=u();m("entry",i.entry)("choice",n)}}function er(e,t){if(e&1&&(a(0,"div",2),d(1,Yo,4,11,"div",3),f(2,"tpl-resale-act-info",4),d(3,Zo,1,2,"tpl-resale-info",5)(4,Xo,1,2,"tpl-resale-listing-entry",6),r()),e&2){let n=u().$implicit,i=u();l(),p(i.isMultipleResalableChoices?1:-1),l(),m("choice",n),l(),p(i.hasResaleInstances(n)?3:4)}}function tr(e,t){if(e&1&&d(0,er,5,3,"div",2),e&2){let n=t.$implicit,i=u();p(i.hasResale(n)?0:-1)}}var Rn=(()=>{let t=class t{constructor(){this.changed=new H}get isMultipleResalableChoices(){return this.entry.choices.filter(i=>this.hasResale(i)).length>1}hasResale(i){return i.act.resalePeriodStartsAt&&i.act.resalePeriodEndsAt&&i.won===!0&&i.seat.resaleEnabled}hasResaleInstances(i){return i.resaleListingInstances.length>0}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-entry-resale-section"]],inputs:{entry:"entry"},outputs:{changed:"changed"},standalone:!0,features:[g],decls:4,vars:0,consts:[["title","\u30EA\u30BB\u30FC\u30EB\u60C5\u5831"],[1,"resale-content"],[1,"choice"],[1,"choice-rank"],[3,"choice"],[3,"choice","preCompanionRequired"],[3,"entry","choice"],[3,"changed","choice","preCompanionRequired"],[3,"changed","entry","choice"]],template:function(o,c){o&1&&(f(0,"tpl-section-header",0),a(1,"div",1),E(2,tr,1,1,null,null,Jo),r()),o&2&&(l(2),b(c.entry.choices))},dependencies:[x,$,Bn,wn,hn,Ce],styles:["[_nghost-%COMP%]{display:block}.resale-content[_ngcontent-%COMP%]{margin-top:16px;padding-bottom:16px}.choice[_ngcontent-%COMP%] + .choice[_ngcontent-%COMP%]{border-top:1px solid var(--tpl-color-border);margin-top:48px;padding-top:48px}.choice-rank[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.4rem;font-weight:500;margin-bottom:8px}"],changeDetection:0});let e=t;return e})();function In(e){return e.status==="before_lottery"&&["lottery","resale_lottery"].includes(e.reception.entryType)&&$t(new Date,e.reception.entryPeriodEndsAt)}function ir(e,t){if(e&1&&(a(0,"div",12)(1,"div",13),s(2,"\u62BD\u9078\u7D50\u679C\u767A\u8868"),r(),a(3,"div",14),s(4),h(5,"date"),r()()),e&2){let n=u();l(4),A(" ",S(5,1,n.entry.reception.resultAnnouncementScheduledAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," ")}}function or(e,t){if(e&1&&(a(0,"div",12)(1,"div",13),s(2,"\u5165\u91D1\u671F\u9593"),r(),a(3,"div",14),s(4),h(5,"date"),h(6,"date"),r()()),e&2){let n=u(2);l(4),V(" ",S(5,2,n.entry.reception.depositPeriodStartsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," \uFF5E ",S(6,5,n.entry.reception.depositPeriodEndsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," ")}}function rr(e,t){if(e&1&&d(0,or,7,8,"div",12),e&2){let n=u();p(n.entry.status==="won_not_paid"?0:-1)}}function ar(e,t){if(e&1&&(a(0,"div",12)(1,"div",13),s(2,"\u5165\u91D1\u671F\u9650"),r(),a(3,"div",14),s(4),h(5,"date"),r()()),e&2){let n=u(2);l(4),A("",S(5,1,n.entry.paymentDeadlineAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," \u307E\u3067")}}function cr(e,t){if(e&1&&d(0,ar,6,4,"div",12),e&2){let n=u();p(n.entry.status==="won_not_paid"?0:-1)}}function lr(e,t){if(e&1&&(a(0,"div",12)(1,"div",13),s(2),r(),a(3,"div",14),s(4),r()()),e&2){let n=u();l(2),v(n.entry.reception.accessControlSerialCodeCodeLabel),l(2),v(n.entry.serialCode)}}function sr(e,t){if(e&1&&f(0,"tpl-entry-refund-section",22),e&2){let n=u();m("entry",n.entry)}}function ur(e,t){if(e&1){let n=B();a(0,"tpl-entry-resale-section",29),P("changed",function(){M(n);let o=u(3);return D(o.refreshResources())}),r()}if(e&2){let n=u();m("entry",n.entry)}}function pr(e,t){if(e&1&&(a(0,"div",30)(1,"a",31),s(2," \u304A\u652F\u6255\u3044\u306F\u3053\u3061\u3089\u304B\u3089 "),r(),a(3,"div",32),s(4),h(5,"date"),r()()),e&2){let n,i=u(2);l(),m("href",i.entry.payments[0].paymentInstructionUrl,pt),l(3),A(" ",S(5,2,(n=i.entry.paymentDeadlineAt)!==null&&n!==void 0?n:i.entry.reception.depositPeriodEndsAt,"M\u6708d\u65E5 H:mm")," \u307E\u3067\u306B\u5165\u91D1\u3092\u5B8C\u4E86\u3055\u305B\u3066\u304F\u3060\u3055\u3044 ")}}function mr(e,t){if(e&1&&d(0,pr,6,5,"div",30),e&2){let n=u();p(n.entry.payments&&n.entry.payments.length>0?0:-1)}}function dr(e,t){if(e&1&&(a(0,"div",23)(1,"div",33),f(2,"tpl-section-header",34),a(3,"div",35),s(4,"\u4EE5\u4E0B\u306E\u5185\u5BB9\u306B\u540C\u610F\u306E\u3046\u3048\u3001\u304A\u7533\u8FBC\u307F\u3044\u305F\u3060\u3044\u3066\u304A\u308A\u307E\u3059\u3002"),r(),a(5,"div",36),f(6,"tbx-wysiwyg-body",37),r()()()),e&2){let n=u();l(6),m("body",n.entry.reception.attentionBody)}}function fr(e,t){if(e&1){let n=B();a(0,"div",28)(1,"button",38),P("click",function(){M(n);let o=u(3);return D(o.cancelEntry())}),s(2," \u7533\u8FBC\u307F\u3092\u30AD\u30E3\u30F3\u30BB\u30EB "),r()()}}function Cr(e,t){if(e&1){let n=B();a(0,"div",7)(1,"div",8),s(2),r(),a(3,"div",9),s(4),r()(),a(5,"div",10)(6,"div",11)(7,"div",12)(8,"div",13),s(9,"\u7533\u8FBC\u756A\u53F7"),r(),a(10,"div",14)(11,"button",15),P("click",function(){let o=M(n),c=u(2);return D(c.copyEntryNumberToClipboard(o.entry.entryNumber))}),a(12,"div",16),s(13),r(),a(14,"div",17),s(15,"\u30BF\u30C3\u30D7\u3057\u3066\u30B3\u30D4\u30FC"),r()()()(),a(16,"div",12)(17,"div",13),s(18,"\u304A\u7533\u8FBC\u307F\u72B6\u6CC1"),r(),f(19,"tpl-entry-history-status",18),r(),a(20,"div",12)(21,"div",13),s(22,"\u304A\u7533\u8FBC\u307F\u65E5\u6642"),r(),a(23,"div",14),s(24),h(25,"date"),r()(),d(26,ir,6,4,"div",12),a(27,"div",12)(28,"div",13),s(29,"\u30C1\u30B1\u30C3\u30C8\u53D7\u53D6\u65B9\u6CD5"),r(),a(30,"div",19)(31,"div",14),s(32),r(),a(33,"div",20)(34,"button",21),P("click",function(){let o=M(n),c=u(2);return D(c.ticketModalService.openTicketReceptionMethodDescriptionModal(o.entry.reception))}),s(35," \u30C1\u30B1\u30C3\u30C8\u53D7\u53D6\u65B9\u6CD5\u306B\u3064\u3044\u3066 "),r()()()(),d(36,rr,1,1)(37,cr,1,1)(38,lr,5,2,"div",12),r(),d(39,sr,1,1,"tpl-entry-refund-section",22)(40,ur,1,1,"tpl-entry-resale-section",22),a(41,"div",23),f(42,"tpl-section-header",24)(43,"tpl-entry-payment-method",25),d(44,mr,1,1),r(),a(45,"div",23),f(46,"tpl-section-header",26),a(47,"tpl-entry-info-detail",27),P("changed",function(){M(n);let o=u(2);return D(o.refreshResources())}),r()(),d(48,dr,7,1,"div",23),h(49,"isBodyPresent"),r(),d(50,fr,3,0,"div",28)}if(e&2){let n=t,i=u(2);l(2),v(n.entry.reception.tour.name),l(2),v(n.entry.reception.name),l(9),v(n.entry.entryNumber),l(6),m("entry",n.entry),l(5),v(S(25,17,n.entry.createdAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")),l(2),p(n.entry.status==="before_lottery"?26:-1),l(6),v(n.entry.ticketReceptionMethod.description),l(4),p(n.entry.reception.entryType==="lottery"?36:37),l(2),p(n.entry.serialCode&&n.entry.reception.accessControlSerialCodeCodeLabel?38:-1),l(),p(n.hasRefund?39:-1),l(),p(n.hasResale?40:-1),l(3),m("entry",n.entry)("card",n.card),l(),p(n.entry.status==="won_not_paid"&&!i.isExpiredPaymentDeadline(n.entry)?44:-1),l(3),m("entry",n.entry),l(),p(n.entry.reception.attentionBody&&j(49,20,n.entry.reception.attentionBody)?48:-1),l(2),p(n.canCancelEntry?50:-1)}}function _r(e,t){if(e&1&&(Be(0),d(1,Cr,51,22),h(2,"async"),we()),e&2){let n,i=u();l(),p((n=j(2,1,i.state$))?1:-1,n)}}var Tn=(()=>{let t=class t{constructor(){this.ticketModalService=C(Zt),this.store=C(fe),this.entryService=C(ge),this.entryUsecase=C(et),this.paymentService=C(Wt),this.paymentUsecase=C(Qt)}ngOnInit(){this.state$=st({entry:this.store.select(sn(this.entryId)).pipe(bt()),card:this.paymentUsecase.card$}).pipe(q(({entry:i,card:o})=>({entry:i,card:o,canCancelEntry:In(i),hasResale:i.choices.some(c=>c.act.resalePeriodStartsAt&&c.act.resalePeriodEndsAt&&c.seat.resaleEnabled&&c.won===!0),hasRefund:i.choices.some(c=>c.refundable)}))),this.fetchResources$=at({entry:this.entryService.fetchEntryById(this.entryId),card:this.paymentService.fetchCard()})}refreshResources(){this.fetchResources$=at({entry:this.entryService.fetchEntryById(this.entryId),card:this.paymentService.fetchCard()})}isExpiredPaymentDeadline(i){let o=i.paymentDeadlineAt??i.reception.depositPeriodEndsAt;return o&&De(o)}copyEntryNumberToClipboard(i){this.entryUsecase.copyEntryNumberToClipboard(i)}cancelEntry(){this.entryUsecase.cancelEntry(this.entryId)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["page-entry-history-detail"]],inputs:{entryId:"entryId"},standalone:!0,features:[g],decls:18,vars:1,consts:[["routerLink","/"],["routerLink","/mypage"],["routerLink","/mypage/entries"],[1,"page-content"],[4,"tbxSuspense"],[1,"back"],["tpl-button","","buttonType","plain","width","auto","size","small","icon","arrow-left","iconPosition","left","routerLink","/mypage/entries","color","basic",1,"plain-button","size-small"],[1,"title-section"],[1,"title"],[1,"description"],[1,"main-section"],[1,"section","status"],[1,"status-date"],[1,"label"],[1,"value"],["tbxTouchable","",1,"entry-number",3,"click"],[1,"entry-number-value"],[1,"entry-number-copy"],[3,"entry"],[1,"body"],[1,"hint"],["tpl-button","","color","basic","size","small","buttonType","plain","icon","arrow-right","width","auto",1,"hint-button",3,"click"],[1,"section",3,"entry"],[1,"section"],["title","\u304A\u652F\u6255\u3044\u60C5\u5831"],[3,"entry","card"],["title","\u304A\u652F\u6255\u3044\u5185\u8A33"],[1,"payment-detail",3,"changed","entry"],[1,"action"],[1,"section",3,"changed","entry"],[1,"payment-link"],["tpl-button","","width","fixed","icon","external-link","target","_blank","rel","noopener noreferrer",3,"href"],[1,"payment-deadline"],[1,"act-attention"],["title","\u6CE8\u610F\u4E8B\u9805"],[1,"act-attention-note"],[1,"act-attention-item"],[1,"act-attention-item-body",3,"body"],["tpl-button","","buttonType","filled","width","fixed","color","attention",3,"click"]],template:function(o,c){o&1&&(a(0,"tpl-breadcrumb")(1,"tpl-breadcrumb-item")(2,"a",0),s(3,"TICKET"),r()(),a(4,"tpl-breadcrumb-item")(5,"a",1),s(6,"\u30DE\u30A4\u30DA\u30FC\u30B8"),r()(),a(7,"tpl-breadcrumb-item")(8,"a",2),s(9,"\u30C1\u30B1\u30C3\u30C8\u7533\u8FBC\u5C65\u6B74"),r()(),a(10,"tpl-breadcrumb-item")(11,"span"),s(12,"\u7533\u8FBC\u8A73\u7D30"),r()()(),a(13,"div",3),d(14,_r,3,3,"ng-container",4),a(15,"div",5)(16,"button",6),s(17," \u7533\u8FBC\u4E00\u89A7\u3078\u623B\u308B "),r()()()),o&2&&(l(14),m("tbxSuspense",c.fetchResources$))},dependencies:[x,Re,L,se,Le,$,Ve,He,Xe,T,nn,ue,vt,pn,Rn,gn,We],styles:["tpl-breadcrumb[_ngcontent-%COMP%]{margin:-32px -24px 0}.page-content[_ngcontent-%COMP%]{margin-top:32px}.title-section[_ngcontent-%COMP%]{margin-top:12px}.title[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:700;line-height:140%}.description[_ngcontent-%COMP%]{font-size:1.4rem;line-height:150%;margin-top:2px}.main-section[_ngcontent-%COMP%]{margin-top:24px}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{margin-top:40px}.entry[_ngcontent-%COMP%]{background-color:var(--tpl-color-form-background);margin-top:32px;padding:16px}.label[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:700}.ticket-name-list[_ngcontent-%COMP%]{display:grid;gap:3px;margin-top:8px}.ticket-name[_ngcontent-%COMP%]{font-size:14px}.status[_ngcontent-%COMP%]{background-color:var(--tpl-color-form-background)}.status[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between}.status[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0;margin-top:8px;min-width:0;text-align:right}tpl-entry-history-status[_ngcontent-%COMP%]{display:block;margin-top:8px}.status-date[_ngcontent-%COMP%]{padding:12px 16px}.status-date[_ngcontent-%COMP%] + .status-date[_ngcontent-%COMP%]{border-top:1px solid var(--tpl-color-border)}.value[_ngcontent-%COMP%]{font-size:1.5rem;line-height:140%;margin-top:8px}.entry-number[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;padding:4px 0;transition:opacity .2s ease-out;width:100%}.entry-number.activated[_ngcontent-%COMP%]{opacity:.75}.entry-number-value[_ngcontent-%COMP%]{flex:1;font-size:1.9rem;min-width:0;text-align:left}@media screen and (max-width: 480px){.entry-number-value[_ngcontent-%COMP%]{font-size:1.7rem}}.entry-number-copy[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent-shade);color:var(--tpl-color-text-light);flex-shrink:0;font-size:1rem;font-weight:600;margin-left:8px;padding:2px 6px}.payment-detail[_ngcontent-%COMP%]{margin-top:16px}.payment-link[_ngcontent-%COMP%]{padding:16px;text-align:center}.payment-deadline[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:500;margin-top:8px}tpl-entry-payment-method[_ngcontent-%COMP%]{margin-top:16px}.action[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:40px}.act-attention[_ngcontent-%COMP%]{margin-top:40px}.act-attention-item[_ngcontent-%COMP%]{margin-top:24px}.act-attention-item-body[_ngcontent-%COMP%]{margin-top:16px}.act-attention-note[_ngcontent-%COMP%]{background-color:var(--tpl-color-background-accent);border-radius:4px;color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:500;margin:16px 0 32px;padding:12px 16px}.back[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:76px}.back[_ngcontent-%COMP%]   [tpl-button][_ngcontent-%COMP%]{width:auto}"]});let e=t;return e})();var yr=(e,t)=>t.id;function gr(e,t){e&1&&(a(0,"div",18),s(1,"\u30EA\u30BB\u30FC\u30EB\u671F\u9593\u4E2D"),r())}function hr(e,t){e&1&&(a(0,"div",18),s(1,"\u8FD4\u91D1\u671F\u9593\u4E2D"),r())}function xr(e,t){if(e&1&&(a(0,"div",15),f(1,"tpl-entry-choice-info",16),a(2,"div",17),d(3,gr,2,0,"div",18)(4,hr,2,0,"div",18),r()()),e&2){let n=t.$implicit,i=t.$index,o=u();ce("single",o.entry.choices.length===1),mt("data-rank",i+1),l(),m("choice",n),l(2),p(o.getResalePeriod(n)==="between"&&n.seat.resaleEnabled&&n.won===!0?3:-1),l(),p(n.refundable===!0&&o.getRefundPeriod(n)==="between"?4:-1)}}function vr(e,t){if(e&1&&(a(0,"div",9)(1,"div",5),s(2,"\u62BD\u9078\u7D50\u679C\u767A\u8868"),r(),a(3,"div",11),s(4),h(5,"date"),r()()),e&2){let n=u();l(4),v(S(5,1,n.entry.reception.resultAnnouncementScheduledAt,"yyyy\u5E74M\u6708d\u65E5 H:mm"))}}function Er(e,t){if(e&1&&(a(0,"div",9)(1,"div",5),s(2,"\u5165\u91D1\u671F\u9593"),r(),a(3,"div",11),s(4),h(5,"date"),h(6,"date"),r()()),e&2){let n=u(2);l(4),V(" ",S(5,2,n.entry.reception.depositPeriodStartsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," \uFF5E ",S(6,5,n.entry.reception.depositPeriodEndsAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," ")}}function br(e,t){if(e&1&&d(0,Er,7,8,"div",9),e&2){let n=u();p(n.entry.status==="won_not_paid"?0:-1)}}function Sr(e,t){if(e&1&&(a(0,"div",9)(1,"div",5),s(2,"\u5165\u91D1\u671F\u9650"),r(),a(3,"div",11),s(4),h(5,"date"),r()()),e&2){let n=u(2);l(4),A("",S(5,1,n.entry.paymentDeadlineAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")," \u307E\u3067")}}function Pr(e,t){if(e&1&&d(0,Sr,6,4,"div",9),e&2){let n=u();p(n.entry.status==="won_not_paid"?0:-1)}}var On=(()=>{let t=class t{get isAttended(){return Ze(this.entry)}get isDisabled(){return["canceled","lost"].includes(this.entry.status)||_e(this.entry)}getQuantity(i){i.seatPlanChoices.map(o=>o.quantity).reduce((o,c)=>o+c,0)}getResalePeriod(i){return X(i.act.resalePeriodStartsAt,i.act.resalePeriodEndsAt)}getRefundPeriod(i){return X(i.refundablePeriodStartsAt,i.refundablePeriodEndsAt)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["tpl-entry-history-item"],["","tpl-entry-history-item",""]],inputs:{entry:"entry"},standalone:!0,features:[g],decls:34,vars:15,consts:[[1,"wrapper"],[1,"title-section"],[1,"title"],[1,"reception-name"],[1,"ticket-section"],[1,"label"],[1,"ticket-name-list"],[1,"choice",3,"single"],[1,"status-section"],[1,"status-section-item"],[3,"entry"],[1,"date"],[1,"value"],[1,"action-section"],["tpl-button","","color","primary","width","fixed","buttonType","filled","icon","arrow-right",1,"button",3,"routerLink"],[1,"choice"],[3,"choice"],[1,"status-list"],[1,"status-item"]],template:function(o,c){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),s(3),r(),a(4,"div",3),s(5),r()(),a(6,"div",4)(7,"div",5),s(8,"\u304A\u7533\u8FBC\u307F\u5185\u5BB9"),r(),a(9,"div",6),E(10,xr,5,6,"div",7,yr),r()(),a(12,"div",8)(13,"div",9)(14,"div",5),s(15,"\u304A\u7533\u8FBC\u307F\u72B6\u6CC1"),r(),f(16,"tpl-entry-history-status",10),r(),a(17,"div",9)(18,"div",5),s(19,"\u304A\u7533\u8FBC\u307F\u65E5\u6642"),r(),a(20,"div",11),s(21),h(22,"date"),r()(),d(23,vr,6,4,"div",9),a(24,"div",9)(25,"div",5),s(26,"\u30C1\u30B1\u30C3\u30C8\u53D7\u53D6\u65B9\u6CD5"),r(),a(27,"div",12),s(28),r()(),d(29,br,1,1)(30,Pr,1,1),r(),a(31,"div",13)(32,"a",14),s(33," \u8A73\u7D30\u3092\u898B\u308B "),r()()()),o&2&&(ce("attention",c.isAttended)("canceled",c.isDisabled),l(3),v(c.entry.reception.tour.name),l(2),v(c.entry.reception.name),l(5),b(c.entry.choices),l(6),m("entry",c.entry),l(5),v(S(22,12,c.entry.createdAt,"yyyy\u5E74M\u6708d\u65E5 H:mm")),l(2),p(c.entry.status==="before_lottery"&&c.entry.reception.entryType==="lottery"?23:-1),l(5),v(c.entry.ticketReceptionMethod.description),l(),p(c.entry.reception.entryType==="lottery"?29:30),l(3),m("routerLink","/mypage/entries/"+c.entry.id))},dependencies:[x,L,se,Xe,T,Ye],styles:["[_nghost-%COMP%]{display:contents}.wrapper[_ngcontent-%COMP%]{background-color:var(--tpl-color-form-background);border-left:4px solid var(--tpl-color-accent)}.wrapper.attention[_ngcontent-%COMP%]{border-color:var(--tpl-color-attention)}.wrapper.canceled[_ngcontent-%COMP%]{border-color:var(--tpl-color-text-light)}.title-section[_ngcontent-%COMP%], .ticket-section[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]{padding:12px 16px}.title-section[_ngcontent-%COMP%]:not(:first-child), .ticket-section[_ngcontent-%COMP%]:not(:first-child), .status-section[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid var(--tpl-color-background-accent)}.title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;line-height:140%}.reception-name[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;line-height:140%;margin-top:2px}.label[_ngcontent-%COMP%]{color:var(--tpl-color-text-light);font-size:1.3rem;font-weight:700}.ticket-name-list[_ngcontent-%COMP%]{display:grid;gap:3px;margin-top:8px}.ticket-name[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700}.status-section-item[_ngcontent-%COMP%] + .status-section-item[_ngcontent-%COMP%]{margin-top:12px}tpl-entry-history-status[_ngcontent-%COMP%]{display:block;margin-top:8px}.date[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;line-height:140%;margin-top:4px}.value[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;line-height:175%;margin-top:4px}.action-section[_ngcontent-%COMP%]{border-top:1px solid var(--tpl-color-background-accent);display:grid;padding:12px 31px}.action-section[_ngcontent-%COMP%]   [tpl-button][_ngcontent-%COMP%]{width:auto}.choice[_ngcontent-%COMP%]{padding-left:32px;position:relative}.choice.single[_ngcontent-%COMP%]{padding-left:0}.choice.single[_ngcontent-%COMP%]:before{display:none}.choice[_ngcontent-%COMP%] + .choice[_ngcontent-%COMP%]{margin-top:8px}.choice[_ngcontent-%COMP%]:before{align-items:center;background-color:var(--tpl-color-background-accent);color:var(--tpl-color-text-light);content:attr(data-rank);display:flex;font-family:var(--tpl-latin-font-family);font-size:1.3rem;font-weight:500;height:100%;justify-content:center;left:0;position:absolute;width:24px}.status-list[_ngcontent-%COMP%]{display:flex;gap:8px}.status-list[_ngcontent-%COMP%]:empty{display:none}.status-item[_ngcontent-%COMP%]{background-color:var(--tpl-color-accent-contrast);border:2px solid var(--tpl-color-accent);color:var(--tpl-color-accent);display:inline-block;font-size:1.3rem;font-weight:600;margin-top:8px;padding:2px 12px}"],changeDetection:0});let e=t;return e})();var Ln=(e,t)=>t.id;function Fr(e,t){if(e&1&&f(0,"tpl-entry-history-item",9),e&2){let n=t.$implicit;m("entry",n)}}function Mr(e,t){if(e&1&&(a(0,"div",5),f(1,"tbx-icon",6),a(2,"div",7),s(3,"\u5165\u91D1\u304C\u5FC5\u8981\u306A\u7533\u8FBC\u304C\u3042\u308A\u307E\u3059"),r()(),a(4,"div",8),E(5,Fr,1,1,"tpl-entry-history-item",9,Ln),r()),e&2){let n=u();l(5),b(n)}}function Dr(e,t){if(e&1&&d(0,Mr,7,0),e&2){let n=t;p(n!=null&&n.length?0:-1)}}function Ar(e,t){if(e&1&&(Be(0),d(1,Dr,1,1),h(2,"async"),we()),e&2){let n,i=u();l(),p((n=j(2,1,i.attentionNeedPaymentEntries$))?1:-1,n)}}function Br(e,t){if(e&1&&f(0,"tpl-entry-history-item",11),e&2){let n=t.$implicit;m("entry",n)}}function wr(e,t){e&1&&(a(0,"tpl-empty-state"),s(1,"\u7533\u8FBC\u6E08\u307F\u306E\u53D7\u4ED8\u304C\u3042\u308A\u307E\u305B\u3093"),r())}function kr(e,t){if(e&1){let n=B();E(0,Br,1,1,"tpl-entry-history-item",11,Ln,!1,wr,2,0,"tpl-empty-state"),a(3,"tbx-infinite-scroll",12),P("infiniteScroll",function(o){M(n);let c=u(2);return D(c.onInfiniteScroll(o))}),f(4,"tpl-loader-block"),r()}if(e&2){let n=t,i=u(2);b(n),l(3),m("disabled",n.length===0||i.loaded)}}function Rr(e,t){if(e&1&&(a(0,"div",8),d(1,kr,5,2,"tbx-infinite-scroll",10),h(2,"async"),r()),e&2){let n,i=u();l(),p((n=j(2,1,i.entries$))?1:-1,n)}}var $n=(()=>{let t=class t{constructor(){this.loaded=!1,this.store=C(fe),this.entryService=C(ge),this.loadingMore=!1,this.entries$=this.store.select(cn),this.attentionNeedPaymentEntries$=this.store.select(ln),this.loaded=!1,this.fetchEntries$=this.entryService.fetchEntries(),this.fetchPaymentRequiredEntries$=this.entryService.fetchPaymentRequiredEntries()}ngOnInit(){}onInfiniteScroll(i){if(this.entryService.entryPage.isComplete){i.complete(),this.loaded=!0;return}this.loadingMore||(this.loadingMore=!0,this.entryService.fetchEntries({init:!1}).subscribe({next:()=>{this.loadingMore=!1,i.complete()},error:()=>{this.loadingMore=!1,i.complete()}}))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["page-entry-history-list"]],standalone:!0,features:[g],decls:16,vars:2,consts:[["routerLink","/"],["routerLink","/mypage"],[1,"page-content"],[4,"tbxSuspense"],["class","entry-history-list",4,"tbxSuspense"],[1,"alert"],["name","alert-diamond"],[1,"alert-text"],[1,"entry-history-list"],["status","attention_need_payment",3,"entry"],[3,"disabled"],[3,"entry"],[3,"infiniteScroll","disabled"]],template:function(o,c){o&1&&(a(0,"tpl-breadcrumb")(1,"tpl-breadcrumb-item")(2,"a",0),s(3,"TICKET"),r()(),a(4,"tpl-breadcrumb-item")(5,"a",1),s(6,"\u30DE\u30A4\u30DA\u30FC\u30B8"),r()(),a(7,"tpl-breadcrumb-item")(8,"span"),s(9,"\u30C1\u30B1\u30C3\u30C8\u7533\u8FBC\u5C65\u6B74"),r()()(),a(10,"div",2),d(11,Ar,3,3,"ng-container",3),a(12,"tpl-page-title"),s(13,"\u3059\u3079\u3066\u306E\u7533\u8FBC"),r(),d(14,Rr,3,3,"div",4),f(15,"tpl-mypage-back-button"),r()),o&2&&(l(11),m("tbxSuspense",c.fetchPaymentRequiredEntries$),l(3),m("tbxSuspense",c.fetchEntries$))},dependencies:[x,Re,se,Le,Ve,He,Xt,On,Oe,It,Gt,Et,Pt],styles:["tpl-breadcrumb[_ngcontent-%COMP%]{margin:-32px -24px 0}.page-content[_ngcontent-%COMP%]{margin-top:32px}.alert[_ngcontent-%COMP%]{align-items:center;background-color:var(--tpl-color-background-accent);border-radius:4px;color:var(--tpl-color-attention);display:grid;font-size:13px;font-weight:700;gap:6px;grid-template-columns:auto auto;justify-content:center;padding:18px 0}tpl-page-title[_ngcontent-%COMP%]:not(:first-child){margin-top:36px}.entry-history-list[_ngcontent-%COMP%]{display:grid;gap:16px;margin-top:16px}"]});let e=t;return e})();function qn(){return[Ht(ct,an)]}var Ir=[{path:"",providers:[qn()],children:[{path:"",component:$n},{path:":entryId",component:Tn}]}],du=Ir;export{Ir as a,du as b};
//# sourceMappingURL=chunk-HUZWO7QM.js.map
