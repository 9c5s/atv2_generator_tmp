import{l as N,p as Q}from"./chunk-KZ3A2NRO.js";import{$a as l,Aa as a,C as j,Eb as S,Hb as B,Hc as Y,Ib as U,Pb as G,Qa as v,Qc as A,Sa as p,W as z,Wa as b,Ya as u,Za as m,_ as d,_a as c,a as g,ab as h,ba as x,eb as w,fb as q,fc as K,gb as E,hb as H,ib as C,ic as P,ka as F,la as O,m as L,sa as V,tb as k,vb as R}from"./chunk-I424EGRW.js";var f=function(e){return e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger",e}(f||{}),mt="*";function X(e,t){return{type:f.Trigger,name:e,definitions:t,options:{}}}function M(e,t=null){return{type:f.Animate,styles:t,timings:e}}function ft(e,t=null){return{type:f.Sequence,steps:e,options:t}}function T(e){return{type:f.Style,styles:e,offset:null}}function $(e,t,o){return{type:f.State,name:e,styles:t,options:o}}function I(e,t,o=null){return{type:f.Transition,expr:e,animation:t,options:o}}var J=class{constructor(t=0,o=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+o}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let o=t=="start"?this._onStartFns:this._onDoneFns;o.forEach(i=>i()),o.length=0}},W=class{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let o=0,i=0,n=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(r=>{r.onDone(()=>{++o==s&&this._onFinish()}),r.onDestroy(()=>{++i==s&&this._onDestroy()}),r.onStart(()=>{++n==s&&this._onStart()})}),this.totalTime=this.players.reduce((r,_)=>Math.max(r,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let o=t*this.totalTime;this.players.forEach(i=>{let n=i.totalTime?Math.min(1,o/i.totalTime):1;i.setPosition(n)})}getPosition(){let t=this.players.reduce((o,i)=>o===null||i.totalTime>o.totalTime?i:o,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let o=t=="start"?this._onStartFns:this._onDoneFns;o.forEach(i=>i()),o.length=0}},_t="!";var Z={toastState:X("state",[$("void, hidden",T({transform:"scale(0.8)",opacity:0})),$("visible",T({transform:"scale(1)",opacity:1})),I("* => visible",M("150ms cubic-bezier(0, 0, 0.2, 1)")),I("* => void, * => hidden",M("75ms cubic-bezier(0.4, 0.0, 1, 1)",T({opacity:0})))])};function it(e,t){if(e&1&&(c(0,"div",1),h(1,"tbx-icon",5),l()),e&2){let o=C();a(),p("name",o.config.icon)}}function st(e,t){if(e&1){let o=w();c(0,"div",3)(1,"button",6),E("click",function(){F(o);let n=C();return O(n.close())}),k(2),l()()}if(e&2){let o=C();a(2),R(" ",o.config.action," ")}}function rt(e,t){if(e&1){let o=w();c(0,"div",4)(1,"button",7),E("click",function(){F(o);let n=C();return O(n.close())}),h(2,"tbx-icon",8),l()()}}var et=(()=>{let t=class t{constructor(){this.animationState="void",this.cdRef=d(G),this.toastService=d(D),this.elementRef=d(V)}get config(){return this.toast.config}ngOnInit(){this.config.duration&&j(this.config.duration).subscribe(()=>this.close()),this.animationState="visible",this.elementRef.nativeElement.classList.add(...this.buttonClass)}close(){this.animationState="void",this.cdRef.markForCheck()}onAnimationDone(){this.animationState==="void"&&(this.toastService.close(this.toast),this.animationState="void")}get buttonClass(){return[`color-${this.config.color}`]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["tpl-toast"]],hostVars:1,hostBindings:function(n,s){n&1&&H("@state.done",function(){return s.onAnimationDone()}),n&2&&q("@state",s.animationState)},inputs:{toast:"toast"},standalone:!0,features:[S],decls:6,vars:3,consts:[[1,"toast"],[1,"icon"],[1,"message"],[1,"action"],[1,"close"],[3,"name"],["tbxTouchable","",1,"action-button",3,"click"],["tbxTouchable","",1,"close-button",3,"click"],["name","close",1,"close-button-icon"]],template:function(n,s){n&1&&(c(0,"div",0),v(1,it,2,1,"div",1),c(2,"div",2),k(3),l(),v(4,st,3,1,"div",3)(5,rt,3,0,"div",4),l()),n&2&&(a(),b(s.config.icon?1:-1),a(2),R(" ",s.config.message," "),a(),b(s.config.action?4:5))},dependencies:[P,Y,A],styles:["[_nghost-%COMP%]{--width: 400px;background:var(--tpl-color-background);border:2px solid var(--color);border-radius:8px;box-shadow:0 4px 8px #0003;display:block;max-width:95%;overflow:hidden;pointer-events:auto;width:var(--width)}.color-primary[_nghost-%COMP%]{--color: var(--tpl-color-primary);--color-rgb: var(--tpl-color-primary-rgb);--color-tint: var(--tpl-color-primary-tint);--color-shade: var(--tpl-color-primary-shade);--contrast: var(--tpl-color-primary-contrast)}.color-accent[_nghost-%COMP%]{--color: var(--tpl-color-accent);--color-rgb: var(--tpl-color-accent-rgb);--color-tint: var(--tpl-color-accent-tint);--color-shade: var(--tpl-color-accent-shade);--contrast: var(--tpl-color-accent-contrast)}.color-error[_nghost-%COMP%]{--color: var(--tpl-color-attention);--color-rgb: var(--tpl-color-attention-rgb);--color-tint: var(--tpl-color-attention-tint);--color-shade: var(--tpl-color-attention-shade);--contrast: var(--tpl-color-attention-contrast)}.color-default[_nghost-%COMP%]{--color: var(--tpl-color-border);--color-rgb: var(--tpl-color-border-rgb);--color-tint: var(--tpl-color-border-tint);--color-shade: var(--tpl-color-border-shade);--contrast: var(--tpl-color-border-contrast)}.toast[_ngcontent-%COMP%]{align-items:center;background-color:rgba(var(--color-rgb),.1);display:flex;height:100%;padding:8px 16px}.icon[_ngcontent-%COMP%]{align-items:center;background-color:var(--color);border-radius:50%;box-shadow:0 2px 4px #0000001a;box-sizing:border-box;color:var(--contrast);display:flex;font-size:20px;height:32px;justify-content:center;margin-right:16px;width:32px}.message[_ngcontent-%COMP%]{flex:1;font-size:1.5rem;font-weight:500;min-width:0}.action[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;font-weight:700;margin-left:8px;padding-left:8px}.action-button[_ngcontent-%COMP%]{border-radius:8px;cursor:pointer;padding:12px 16px;transition:background-color .15s ease-in-out,transform .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{background-color:rgba(var(--tpl-color-text-light-rgb),.05)}.close-button[_ngcontent-%COMP%]{align-items:center;border-radius:8px;cursor:pointer;display:flex;justify-content:center;padding:8px;transition:background-color .15s ease-in-out,transform .15s ease-in-out}.close-button[_ngcontent-%COMP%]:hover{background-color:rgba(var(--tpl-color-text-light-rgb),.05)}.close-button.activated[_ngcontent-%COMP%]{transform:scale(.9)}.close-button[_ngcontent-%COMP%]   .close-button-icon[_ngcontent-%COMP%]{color:var(--tpl-color-text-light)}"],data:{animation:[Z.toastState]},changeDetection:0});let e=t;return e})();var y=(e,t)=>t.id;function at(e,t){if(e&1&&h(0,"tpl-toast",1),e&2){let o=t.$implicit;p("toast",o)}}function ct(e,t){if(e&1&&h(0,"tpl-toast",1),e&2){let o=t.$implicit;p("toast",o)}}function lt(e,t){if(e&1&&h(0,"tpl-toast",1),e&2){let o=t.$implicit;p("toast",o)}}function ht(e,t){if(e&1&&h(0,"tpl-toast",1),e&2){let o=t.$implicit;p("toast",o)}}function pt(e,t){if(e&1&&h(0,"tpl-toast",1),e&2){let o=t.$implicit;p("toast",o)}}function dt(e,t){if(e&1&&h(0,"tpl-toast",1),e&2){let o=t.$implicit;p("toast",o)}}function ut(e,t){if(e&1&&(c(0,"div",0),u(1,at,1,1,"tpl-toast",1,y),l(),c(3,"div",2),u(4,ct,1,1,"tpl-toast",1,y),l(),c(6,"div",3),u(7,lt,1,1,"tpl-toast",1,y),l(),c(9,"div",4),u(10,ht,1,1,"tpl-toast",1,y),l(),c(12,"div",5),u(13,pt,1,1,"tpl-toast",1,y),l(),c(15,"div",6),u(16,dt,1,1,"tpl-toast",1,y),l()),e&2){let o=t;a(),m(o.topLeft),a(3),m(o.topCenter),a(3),m(o.topRight),a(3),m(o.bottomLeft),a(3),m(o.bottomCenter),a(3),m(o.bottomRight)}}var ot=(()=>{let t=class t{constructor(){this.toastService=d(D)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["tpl-toast-layout"]],standalone:!0,features:[S],decls:2,vars:3,consts:[[1,"toast-container","top","left"],[3,"toast"],[1,"toast-container","top","center"],[1,"toast-container","top","right"],[1,"toast-container","bottom","left"],[1,"toast-container","bottom","center"],[1,"toast-container","bottom","right"]],template:function(n,s){if(n&1&&(v(0,ut,18,0),B(1,"async")),n&2){let r;b((r=U(1,1,s.toastService.allToasts$))?0:-1,r)}},dependencies:[P,K,et],styles:["[_nghost-%COMP%]{display:block;height:100%;position:relative;width:100%}.toast-container[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;padding:12px;position:absolute}.toast-container[_ngcontent-%COMP%]:empty{display:none}.top[_ngcontent-%COMP%]{top:32px}.top[_ngcontent-%COMP%]   tpl-toast[_ngcontent-%COMP%]{margin-bottom:16px}.bottom[_ngcontent-%COMP%]{bottom:32px;flex-direction:column-reverse}.bottom[_ngcontent-%COMP%]   tpl-toast[_ngcontent-%COMP%]{margin-top:16px}.left[_ngcontent-%COMP%]{align-items:flex-start;left:8px;right:32px;width:calc(100% - 40px)}.right[_ngcontent-%COMP%]{align-items:flex-end;left:32px;right:8px;width:calc(100% - 40px)}.center[_ngcontent-%COMP%]{align-items:center;left:50%;transform:translate(-50%);width:100%}"],changeDetection:0});let e=t;return e})();var nt={verticalPosition:"bottom",horizontalPosition:"center",color:"default",dedupe:!0};var D=(()=>{let t=class t{constructor(){this.toasts$=new L({topLeft:[],topRight:[],topCenter:[],bottomLeft:[],bottomRight:[],bottomCenter:[],length:0}),this.overlayRef=null,this.overlay=d(Q),this.previousToast=null}get allToasts$(){return this.toasts$.asObservable()}open(i){let n=g(g({},nt),i);this.previousToast?.config.verticalPosition===n.verticalPosition&&this.previousToast?.config.horizontalPosition===n.horizontalPosition&&this.previousToast?.config.message===n.message&&this.previousToast?.config.dedupe&&this.close(this.previousToast),this.overlayRef||(this.overlayRef=this.overlay.create({panelClass:"tpl-toast-container"}),this.overlayRef.attach(new N(ot))),this.addToast(n)}close(i){this.closeToast(i),this.toasts$.value.length===0&&(this.overlayRef?.detach(),this.overlayRef=null)}addToast(i){let n=this.generateId(),s=g({},this.toasts$.value),r=this.getToastPosition(i.verticalPosition,i.horizontalPosition),_={id:n,config:i};s[r]=[...s[r],_],s.length+=1,this.toasts$.next(s),this.previousToast=g({},_)}closeToast(i){let n=g({},this.toasts$.value),s=this.getToastPosition(i.config.verticalPosition,i.config.horizontalPosition),r=n[s].length;n[s]=n[s].filter(_=>_.id!==i.id),r!==n[s].length&&(n.length-=1),this.toasts$.next(n),i.id===this.previousToast?.id&&(this.previousToast=null)}generateId(){let i=new Date().getTime().toString(),n=Math.random().toString(36).substring(2);return`${i}-${n}`}getToastPosition(i,n){return`${i}${n[0].toUpperCase()}${n.slice(1)}`}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{f as a,mt as b,ft as c,T as d,J as e,W as f,_t as g,D as h};
//# sourceMappingURL=chunk-KLXVAUUB.js.map
